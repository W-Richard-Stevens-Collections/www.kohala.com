%!PS-Adobe-2.0
%%Pages: (atend)
%%Creator: groff version 1.08
%%DocumentNeededResources: font AvantGarde-BookOblique
%%+ font Courier-Bold
%%+ font AvantGarde-DemiOblique
%%+ font Helvetica-Bold
%%+ font Palatino-Roman
%%+ font Courier
%%+ font Palatino-Bold
%%+ font Palatino-Italic
%%+ font Symbol
%%+ font Courier-Oblique
%%DocumentSuppliedResources: procset grops 1.08 0
%%Pages: 19
%%PageOrder: Ascend
%%Orientation: Portrait
%%EndComments
%%BeginProcSet: up_prolog 1 13007
/UpDict13007 23 3 add dict def
UpDict13007 begin
/inch {72 mul} def
/moveU {0 11 inch translate} def
/moveR {6.65 inch 0 translate} def
/moveD {0 -11 inch translate} def
/moveL {-8.5 inch 0 translate} def
/rotR {-90 rotate} def
/rotL {90 rotate} def
/doSpiral {moveU moveR rotR 0.67 dup scale} def
/moveHU { 0 5.5 inch translate} def
/doRevSpiral {moveHU rotL 0.67 dup scale} def
/UpShowpage {showpage} bind def
/UpState {} def
end
/showpage {} def
%%EndProcSet: up_prolog 1 13007
%%BeginProlog
%%BeginResource: procset grops 1.08 0
/setpacking where{
pop
currentpacking
true setpacking
}if
/grops 120 dict dup begin
/SC 32 def
/A/show load def
/B{0 SC 3 -1 roll widthshow}bind def
/C{0 exch ashow}bind def
/D{0 exch 0 SC 5 2 roll awidthshow}bind def
/E{0 rmoveto show}bind def
/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
/G{0 rmoveto 0 exch ashow}bind def
/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/I{0 exch rmoveto show}bind def
/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
/K{0 exch rmoveto 0 exch ashow}bind def
/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/M{rmoveto show}bind def
/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
/O{rmoveto 0 exch ashow}bind def
/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/Q{moveto show}bind def
/R{moveto 0 SC 3 -1 roll widthshow}bind def
/S{moveto 0 exch ashow}bind def
/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/SF{
findfont exch
[exch dup 0 exch 0 exch neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/MF{
findfont
[5 2 roll
0 3 1 roll 
neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/level0 0 def
/RES 0 def
/PL 0 def
/LS 0 def
/PLG{
gsave newpath clippath pathbbox grestore
exch pop add exch pop
}bind def
/BP{
/level0 save def
1 setlinecap
1 setlinejoin
72 RES div dup scale
LS{
90 rotate
}{
0 PL translate
}ifelse
1 -1 scale
}bind def
/EP{
level0 restore
0.1 setlinewidth
 10.8  78   moveto   14.4  0   rlineto   stroke % lower left cut mark
 39.6  42   moveto    0   21.6 rlineto   stroke
588    78   moveto   14.4  0   rlineto   stroke % lower right cut mark
573.6  42   moveto    0   21.6 rlineto   stroke
 10.8 744   moveto   14.4  0   rlineto   stroke % upper left cut mark
 39.6 758.4 moveto    0   21.6 rlineto   stroke
588   744   moveto   14.4  0   rlineto   stroke % upper right cut mark
573.6 758.4 moveto    0   21.6 rlineto   stroke
%
% uncomment following lines to print rules at page# baseline
% 39.6 708 moveto   50.4 0 rlineto   stroke	% to left of upper left page#
%523.2 708 moveto   50.4 0 rlineto   stroke	% to right of upper right page#
%
% uncomment following lines to print bottom trim line(s)
0 setlinewidth   129.6 132 moveto   390 0 rlineto   stroke
		 122   138 moveto     6 0 rlineto   stroke
		 114   144 moveto    14 0 rlineto   stroke
		 122   150 moveto     6 0 rlineto   stroke
		 114   156 moveto    14 0 rlineto   stroke
		 122   162 moveto     6 0 rlineto   stroke
		 114   168 moveto    14 0 rlineto   stroke
		 521.2 138 moveto     6 0 rlineto   stroke
		 521.2 144 moveto    14 0 rlineto   stroke
		 521.2 150 moveto     6 0 rlineto   stroke
		 521.2 156 moveto    14 0 rlineto   stroke
		 521.2 162 moveto     6 0 rlineto   stroke
		 521.2 168 moveto    14 0 rlineto   stroke
% uncomment following line to print bottom trim line for index
%		 129.6 156 moveto   390 0 rlineto   stroke
%
% uncomment following lines to print PostScript and Courier versions
%/Courier findfont dup 10 scalefont setfont
%100 65 moveto (PostScript Version: ) show
%version show
%100 50 moveto (Courier Version: ) show
%/FontInfo get /version get show
showpage
}bind def
/DA{
newpath arcn stroke
}bind def
/SN{
transform
.25 sub exch .25 sub exch
round .25 add exch round .25 add exch
itransform
}bind def
/DL{
SN
moveto
SN
lineto stroke
}bind def
/DC{
newpath 0 360 arc closepath
}bind def
/TM matrix def
/DE{
TM currentmatrix pop
translate scale newpath 0 0 .5 0 360 arc closepath
TM setmatrix
}bind def
/RC/rcurveto load def
/RL/rlineto load def
/ST/stroke load def
/MT/moveto load def
/CL/closepath load def
/FL{
currentgray exch setgray fill setgray
}bind def
/BL/fill load def
/LW/setlinewidth load def
/RE{
findfont
dup maxlength 1 index/FontName known not{1 add}if dict begin
{
1 index/FID ne{def}{pop pop}ifelse
}forall
/Encoding exch def
dup/FontName exch def
currentdict end definefont pop
}bind def
/DEFS 0 def
/EBEGIN{
moveto
DEFS begin
}bind def
/EEND/end load def
/CNT 0 def
/level1 0 def
/PBEGIN{
/level1 save def
translate
div 3 1 roll div exch scale
neg exch neg exch translate
0 setgray
0 setlinecap
1 setlinewidth
0 setlinejoin
10 setmiterlimit
[]0 setdash
/setstrokeadjust where{
pop
false setstrokeadjust
}if
/setoverprint where{
pop
false setoverprint
}if
newpath
/CNT countdictstack def
userdict begin
/showpage{}def
}bind def
/PEND{
clear
countdictstack CNT sub{end}repeat
level1 restore
}bind def
end def
/setpacking where{
pop
setpacking
}if
%%EndResource
%%IncludeResource: font AvantGarde-BookOblique
%%IncludeResource: font Courier-Bold
%%IncludeResource: font AvantGarde-DemiOblique
%%IncludeResource: font Helvetica-Bold
%%IncludeResource: font Palatino-Roman
%%IncludeResource: font Courier
%%IncludeResource: font Palatino-Bold
%%IncludeResource: font Palatino-Italic
%%IncludeResource: font Symbol
%%IncludeResource: font Courier-Oblique
grops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72 def/PL
792 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron/scaron/zcaron
/Ydieresis/trademark/quotesingle/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/space
/exclam/quotedbl/numbersign/dollar/percent/ampersand/quoteright/parenleft
/parenright/asterisk/plus/comma/hyphen/period/slash/zero/one/two/three/four
/five/six/seven/eight/nine/colon/semicolon/less/equal/greater/question/at/A/B/C
/D/E/F/G/H/I/J/K/L/M/N/O/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash
/bracketright/circumflex/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q
/r/s/t/u/v/w/x/y/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase
/guillemotleft/guillemotright/bullet/florin/fraction/perthousand/dagger
/daggerdbl/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen/brokenbar
/section/dieresis/copyright/ordfeminine/guilsinglleft/logicalnot/minus
/registered/macron/degree/plusminus/twosuperior/threesuperior/acute/mu
/paragraph/periodcentered/cedilla/onesuperior/ordmasculine/guilsinglright
/onequarter/onehalf/threequarters/questiondown/Agrave/Aacute/Acircumflex/Atilde
/Adieresis/Aring/AE/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute
/Icircumflex/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn/germandbls
/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla/egrave/eacute
/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis/eth/ntilde/ograve
/oacute/ocircumflex/otilde/odieresis/divide/oslash/ugrave/uacute/ucircumflex
/udieresis/yacute/thorn/ydieresis]def/Courier-Oblique@0 ENC0/Courier-Oblique RE
/Palatino-Italic@0 ENC0/Palatino-Italic RE/Palatino-Bold@0 ENC0/Palatino-Bold
RE/Courier@0 ENC0/Courier RE/Palatino-Roman@0 ENC0/Palatino-Roman RE
/Helvetica-Bold@0 ENC0/Helvetica-Bold RE/AvantGarde-DemiOblique@0 ENC0
/AvantGarde-DemiOblique RE/Courier-Bold@0 ENC0/Courier-Bold RE
/AvantGarde-BookOblique@0 ENC0/AvantGarde-BookOblique RE
%%EndProlog
%%Page: ? 1
UpDict13007 begin
save /UpState exch def

8.50 inch -0.55 inch translate rotL 0.80 dup scale

end
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Palatino-Bold@0 SF(426)93.6 82 Q/F1 9/Courier@0 SF(ioctl)125.1 82 Q/F2 9
/Palatino-Roman@0 SF 272.802(Operations Chapter)4.5 F(16)2.25 E .32 LW 97.6
89.2 93.6 89.2 DL 99.6 89.2 95.6 89.2 DL 103.6 89.2 99.6 89.2 DL 107.6 89.2
103.6 89.2 DL 111.6 89.2 107.6 89.2 DL 115.6 89.2 111.6 89.2 DL 119.6 89.2
115.6 89.2 DL 123.6 89.2 119.6 89.2 DL 127.6 89.2 123.6 89.2 DL 131.6 89.2
127.6 89.2 DL 135.6 89.2 131.6 89.2 DL 139.6 89.2 135.6 89.2 DL 143.6 89.2
139.6 89.2 DL 147.6 89.2 143.6 89.2 DL 151.6 89.2 147.6 89.2 DL 155.6 89.2
151.6 89.2 DL 159.6 89.2 155.6 89.2 DL 163.6 89.2 159.6 89.2 DL 167.6 89.2
163.6 89.2 DL 171.6 89.2 167.6 89.2 DL 175.6 89.2 171.6 89.2 DL 179.6 89.2
175.6 89.2 DL 183.6 89.2 179.6 89.2 DL 187.6 89.2 183.6 89.2 DL 191.6 89.2
187.6 89.2 DL 195.6 89.2 191.6 89.2 DL 199.6 89.2 195.6 89.2 DL 203.6 89.2
199.6 89.2 DL 207.6 89.2 203.6 89.2 DL 211.6 89.2 207.6 89.2 DL 215.6 89.2
211.6 89.2 DL 219.6 89.2 215.6 89.2 DL 223.6 89.2 219.6 89.2 DL 227.6 89.2
223.6 89.2 DL 231.6 89.2 227.6 89.2 DL 235.6 89.2 231.6 89.2 DL 239.6 89.2
235.6 89.2 DL 243.6 89.2 239.6 89.2 DL 247.6 89.2 243.6 89.2 DL 251.6 89.2
247.6 89.2 DL 255.6 89.2 251.6 89.2 DL 259.6 89.2 255.6 89.2 DL 263.6 89.2
259.6 89.2 DL 267.6 89.2 263.6 89.2 DL 271.6 89.2 267.6 89.2 DL 275.6 89.2
271.6 89.2 DL 279.6 89.2 275.6 89.2 DL 283.6 89.2 279.6 89.2 DL 287.6 89.2
283.6 89.2 DL 291.6 89.2 287.6 89.2 DL 295.6 89.2 291.6 89.2 DL 299.6 89.2
295.6 89.2 DL 303.6 89.2 299.6 89.2 DL 307.6 89.2 303.6 89.2 DL 311.6 89.2
307.6 89.2 DL 315.6 89.2 311.6 89.2 DL 319.6 89.2 315.6 89.2 DL 323.6 89.2
319.6 89.2 DL 327.6 89.2 323.6 89.2 DL 331.6 89.2 327.6 89.2 DL 335.6 89.2
331.6 89.2 DL 339.6 89.2 335.6 89.2 DL 343.6 89.2 339.6 89.2 DL 347.6 89.2
343.6 89.2 DL 351.6 89.2 347.6 89.2 DL 355.6 89.2 351.6 89.2 DL 359.6 89.2
355.6 89.2 DL 363.6 89.2 359.6 89.2 DL 367.6 89.2 363.6 89.2 DL 371.6 89.2
367.6 89.2 DL 375.6 89.2 371.6 89.2 DL 379.6 89.2 375.6 89.2 DL 383.6 89.2
379.6 89.2 DL 387.6 89.2 383.6 89.2 DL 391.6 89.2 387.6 89.2 DL 395.6 89.2
391.6 89.2 DL 399.6 89.2 395.6 89.2 DL 403.6 89.2 399.6 89.2 DL 407.6 89.2
403.6 89.2 DL 411.6 89.2 407.6 89.2 DL 415.6 89.2 411.6 89.2 DL 419.6 89.2
415.6 89.2 DL 423.6 89.2 419.6 89.2 DL 427.6 89.2 423.6 89.2 DL 431.6 89.2
427.6 89.2 DL 435.6 89.2 431.6 89.2 DL 439.6 89.2 435.6 89.2 DL 443.6 89.2
439.6 89.2 DL 447.6 89.2 443.6 89.2 DL 451.6 89.2 447.6 89.2 DL 455.6 89.2
451.6 89.2 DL 459.6 89.2 455.6 89.2 DL 463.6 89.2 459.6 89.2 DL 467.6 89.2
463.6 89.2 DL 471.6 89.2 467.6 89.2 DL 475.6 89.2 471.6 89.2 DL 479.6 89.2
475.6 89.2 DL 483.6 89.2 479.6 89.2 DL 487.6 89.2 483.6 89.2 DL 491.6 89.2
487.6 89.2 DL 495.6 89.2 491.6 89.2 DL 499.6 89.2 495.6 89.2 DL 503.6 89.2
499.6 89.2 DL 507.6 89.2 503.6 89.2 DL 511.6 89.2 507.6 89.2 DL 515.6 89.2
511.6 89.2 DL 519.6 89.2 515.6 89.2 DL/F3 12/Helvetica-Bold@0 SF(16.2)93.6 123
Q/F4 12/Courier-Bold@0 SF(ioctl)129.6 123 Q F3(Function)6.672 E/F5 10
/Palatino-Roman@0 SF(This function af)129.6 147 Q(fects an open \214le, r)-.18
E(efer)-.18 E(enced by the)-.18 E/F6 10/Palatino-Italic@0 SF(fd)2.5 E F5(ar)2.5
E(gument.)-.18 E/F7 8.15/Courier@0 SF(#include <unistd.h>)147.6 169 Q
(int ioctl\(int)147.6 188 Q/F8 8.15/Palatino-Italic@0 SF(fd)4.89 E F7 4.89(,i)C
(nt)237.071 188 Q F8 -.147(re)4.89 G(quest).147 E F7 4.89(,.)C(.. /* void *)
289.962 188 Q F8(ar)A(g)-.147 E F7(*/ \);)4.89 E/F9 8.15/Palatino-Roman@0 SF
(Returns: 0 if OK,)399.869 207 Q/F10 8.15/Symbol SF(-)2.038 E F9 2.038(1o)C
2.038(ne)476.955 207 S(rr)487.64 207 Q(or)-.147 E .326 LW 129.6 156.775 129.6
211.075 DL 519.6 156.775 129.6 156.775 DL 519.6 211.075 519.6 156.775 DL 129.6
211.075 519.6 211.075 DL F5(The thir)129.6 231 Q 2.5(da)-.18 G -.18(rg)178.21
231 S(ument is always a pointer).18 E 2.5(,b)-.74 G
(ut the type of pointer depends on the)311.46 231 Q F6 -.18(re)2.5 G(quest).18
E F5(.)A/F11 8/Palatino-Roman@0 SF .77(4.4BSD de\214nes the second ar)183.6 251
R .77(gument to be an)-.144 F/F12 8/Courier@0 SF -2.03(unsigned long)2.77 F F11
.77(instead of an)2.77 F F12(int)2.77 E F11 2.77(,b)C .77(ut that is)487.036
251 R(not a pr)183.6 261 Q
(oblem, since header \214les de\214ne the constants that ar)-.144 E 2(eu)-.144
G(sed for this ar)405.512 261 Q(gument.)-.144 E .452
(Some implementations specify the thir)183.6 281 R 2.451(da)-.144 G -.144(rg)
332.81 281 S .451(ument as a).144 F F12 -2.349(void *)2.451 F F11(pointer)2.451
E 2.451(,i)-.592 G .451(nstead of the ANSI C)442.852 281 R(ellipsis notation.)
183.6 291 Q(Ther)183.6 311 Q 3.313(ei)-.144 G 3.313(sn)209.481 311 S 3.313(os)
220.842 311 S(tandar)231.915 311 Q 3.313(df)-.144 G 1.313
(or the header to include to de\214ne the function pr)265.948 311 R 1.313
(ototype for)-.144 F F12(ioctl)3.314 E F11(,)A .167(since it is not standar)
183.6 321 R .167(dized by Posix.)-.144 F .166(Many systems de\214ne it in)4.167
F F12(<unistd.h>)2.166 E F11 2.166(,a)C 2.166(sw)466.998 321 S 2.166(es)479.228
321 S(how)488.618 321 Q 2.166(,b)-.736 G(ut)512.168 321 Q
(traditional BSD systems de\214ne it in)183.6 331 Q F12(<sys/ioctl.h>)2 E F11
(.)A F5 1.84 -.92(We c)147.6 349 T(an divide the).92 E F6 -.18(re)2.5 G(quest)
.18 E F5 2.5(sr)C(elated to networking into six categories.)268.49 349 Q 7.5
<8373>147.6 367 S(ocket operations)165.4 367 Q 7.5<838c>147.6 379 S
(le operations)167.21 379 Q 7.5<8369>147.6 391 S(nterface operations)164.07 391
Q 7.5<8341>147.6 403 S(RP cache operations)168.94 403 Q 7.5<8372>147.6 415 S
(outing table operations)164.93 415 Q 7.5<8373>147.6 427 S(tr)165.4 427 Q
(eams system \(Chapter 33\))-.18 E .42(Recall fr)129.6 445 R .42(om Figur)-.18
F 2.92(e7)-.18 G .42(.15 that not only do some of the)220.1 445 R/F13 10
/Courier@0 SF(ioctl)2.92 E F5 .42(operations overlap some of)2.92 F(the)129.6
457 Q F13(fcntl)2.62 E F5 .12
(operations \(e.g., setting a socket nonblocking\), but ther)2.62 F 2.62(ea)
-.18 G .48 -.18(re a)433.71 457 T .12(lso some opera-).18 F 1.495
(tions that can be speci\214ed mor)129.6 469 R 3.995(et)-.18 G 1.495
(han one way using)283.63 469 R F13(ioctl)3.995 E F5 1.495
(\(e.g., setting the pr)3.995 F(ocess)-.18 E(gr)129.6 481 Q
(oup ownership of a socket\).)-.18 E(Figur)147.6 493 Q 3.288(e1)-.18 G .788
(6.1 lists the)184.508 493 R F6 -.18(re)3.287 G(quest).18 E F5 .787
(s, along with the datatype of what the)B F6(ar)3.287 E(g)-.18 E F5(addr)3.287
E .787(ess must)-.18 F(point to.)129.6 505 Q
(The following sections describe these r)5 E(equests in mor)-.18 E 2.5(ed)-.18
G(etail.)420.45 505 Q F3 9.312(16.3 Soc)93.6 538.6 R 3.336(ket Operations)-.24
F F5(Ther)129.6 562.6 Q 2.986(ea)-.18 G .846 -.18(re t)162.886 562.6 T(hr).18 E
(ee)-.18 E F13(ioctl)2.986 E F5 -.18(re)2.986 G .486
(quests explicitly for sockets \(pp. 551).18 F<89>.833 -.9 M .487
(553 of TCPv2\).).833 .9 N .487(All thr)5.487 F(ee)-.18 E -.18(re)129.6 574.6 S
(quir).18 E 2.5(et)-.18 G(hat the thir)167.02 574.6 Q 2.5(da)-.18 G -.18(rg)
229.34 574.6 S(ument to).18 E F13(ioctl)2.5 E F5(be a pointer to an integer)2.5
E(.)-.74 E F13(SIOCATMARK)129.6 598.6 Q F5 .474(Return thr)201.6 598.6 R .474
(ough the integer pointed to by the thir)-.18 F 2.973(da)-.18 G -.18(rg)434.474
598.6 S .473(ument a nonzer).18 F(o)-.18 E 1.005(value if the socket's r)201.6
610.6 R 1.005(ead pointer is curr)-.18 F 1.006(ently at the out-of-band mark,)
-.18 F 1.038(or a zer)201.6 622.6 R 3.537(ov)-.18 G 1.037(alue if the r)251.293
622.6 R 1.037(ead pointer is not at the out-of-band mark.)-.18 F -.92(We)6.037
G 3.736(describe out-of-band data in mor)201.6 634.6 R 6.237(ed)-.18 G 3.737
(etail in Chapter 21.)379.262 634.6 R(Posix.1g)8.737 E -.18(re)201.6 646.6 S
1.233(places this r).18 F 1.233(equest with the)-.18 F F13(sockatmark)3.733 E
F5 1.233(function and we show an)3.733 F
(implementation of this new function using)201.6 658.6 Q F13(ioctl)2.5 E F5
(in Section 21.3.)2.5 E EP
UpDict13007 begin
moveR
end
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Palatino-Roman@0 SF(Section 16.4)93.6 82 Q 2.25(File Operations)424.677
82 R/F1 9/Palatino-Bold@0 SF(427)506.1 82 Q .32 LW 97.6 89.2 93.6 89.2 DL 99.6
89.2 95.6 89.2 DL 103.6 89.2 99.6 89.2 DL 107.6 89.2 103.6 89.2 DL 111.6 89.2
107.6 89.2 DL 115.6 89.2 111.6 89.2 DL 119.6 89.2 115.6 89.2 DL 123.6 89.2
119.6 89.2 DL 127.6 89.2 123.6 89.2 DL 131.6 89.2 127.6 89.2 DL 135.6 89.2
131.6 89.2 DL 139.6 89.2 135.6 89.2 DL 143.6 89.2 139.6 89.2 DL 147.6 89.2
143.6 89.2 DL 151.6 89.2 147.6 89.2 DL 155.6 89.2 151.6 89.2 DL 159.6 89.2
155.6 89.2 DL 163.6 89.2 159.6 89.2 DL 167.6 89.2 163.6 89.2 DL 171.6 89.2
167.6 89.2 DL 175.6 89.2 171.6 89.2 DL 179.6 89.2 175.6 89.2 DL 183.6 89.2
179.6 89.2 DL 187.6 89.2 183.6 89.2 DL 191.6 89.2 187.6 89.2 DL 195.6 89.2
191.6 89.2 DL 199.6 89.2 195.6 89.2 DL 203.6 89.2 199.6 89.2 DL 207.6 89.2
203.6 89.2 DL 211.6 89.2 207.6 89.2 DL 215.6 89.2 211.6 89.2 DL 219.6 89.2
215.6 89.2 DL 223.6 89.2 219.6 89.2 DL 227.6 89.2 223.6 89.2 DL 231.6 89.2
227.6 89.2 DL 235.6 89.2 231.6 89.2 DL 239.6 89.2 235.6 89.2 DL 243.6 89.2
239.6 89.2 DL 247.6 89.2 243.6 89.2 DL 251.6 89.2 247.6 89.2 DL 255.6 89.2
251.6 89.2 DL 259.6 89.2 255.6 89.2 DL 263.6 89.2 259.6 89.2 DL 267.6 89.2
263.6 89.2 DL 271.6 89.2 267.6 89.2 DL 275.6 89.2 271.6 89.2 DL 279.6 89.2
275.6 89.2 DL 283.6 89.2 279.6 89.2 DL 287.6 89.2 283.6 89.2 DL 291.6 89.2
287.6 89.2 DL 295.6 89.2 291.6 89.2 DL 299.6 89.2 295.6 89.2 DL 303.6 89.2
299.6 89.2 DL 307.6 89.2 303.6 89.2 DL 311.6 89.2 307.6 89.2 DL 315.6 89.2
311.6 89.2 DL 319.6 89.2 315.6 89.2 DL 323.6 89.2 319.6 89.2 DL 327.6 89.2
323.6 89.2 DL 331.6 89.2 327.6 89.2 DL 335.6 89.2 331.6 89.2 DL 339.6 89.2
335.6 89.2 DL 343.6 89.2 339.6 89.2 DL 347.6 89.2 343.6 89.2 DL 351.6 89.2
347.6 89.2 DL 355.6 89.2 351.6 89.2 DL 359.6 89.2 355.6 89.2 DL 363.6 89.2
359.6 89.2 DL 367.6 89.2 363.6 89.2 DL 371.6 89.2 367.6 89.2 DL 375.6 89.2
371.6 89.2 DL 379.6 89.2 375.6 89.2 DL 383.6 89.2 379.6 89.2 DL 387.6 89.2
383.6 89.2 DL 391.6 89.2 387.6 89.2 DL 395.6 89.2 391.6 89.2 DL 399.6 89.2
395.6 89.2 DL 403.6 89.2 399.6 89.2 DL 407.6 89.2 403.6 89.2 DL 411.6 89.2
407.6 89.2 DL 415.6 89.2 411.6 89.2 DL 419.6 89.2 415.6 89.2 DL 423.6 89.2
419.6 89.2 DL 427.6 89.2 423.6 89.2 DL 431.6 89.2 427.6 89.2 DL 435.6 89.2
431.6 89.2 DL 439.6 89.2 435.6 89.2 DL 443.6 89.2 439.6 89.2 DL 447.6 89.2
443.6 89.2 DL 451.6 89.2 447.6 89.2 DL 455.6 89.2 451.6 89.2 DL 459.6 89.2
455.6 89.2 DL 463.6 89.2 459.6 89.2 DL 467.6 89.2 463.6 89.2 DL 471.6 89.2
467.6 89.2 DL 475.6 89.2 471.6 89.2 DL 479.6 89.2 475.6 89.2 DL 483.6 89.2
479.6 89.2 DL 487.6 89.2 483.6 89.2 DL 491.6 89.2 487.6 89.2 DL 495.6 89.2
491.6 89.2 DL 499.6 89.2 495.6 89.2 DL 503.6 89.2 499.6 89.2 DL 507.6 89.2
503.6 89.2 DL 511.6 89.2 507.6 89.2 DL 515.6 89.2 511.6 89.2 DL 519.6 89.2
515.6 89.2 DL 507.872 125 141.328 125 DL/F2 8/Palatino-Roman@0 SF(Category)
145.328 133 Q/F3 8/Palatino-Italic@0 SF -.144(re)211.904 133 S(quest).144 E F2
84.544(Description Datatype)326.256 133 R 507.872 137 141.328 137 DL 507.872
139 141.328 139 DL(socket)145.328 147 Q/F4 8/Courier@0 SF(SIOCATMARK)189.864
147 Q F2(at out-of-band mark ?)269.064 147 Q F4(int)436.672 147 Q(SIOCSPGRP)
189.864 157 Q F2(set pr)269.064 157 Q(ocess ID or pr)-.144 E(ocess gr)-.144 E
(oup ID of socket)-.144 E F4(int)436.672 157 Q(SIOCGPGRP)189.864 167 Q F2
(get pr)269.064 167 Q(ocess ID or pr)-.144 E(ocess gr)-.144 E(oup ID of socket)
-.144 E F4(int)436.672 167 Q 507.872 171 141.328 171 DL F2(\214le)145.328 179 Q
F4(FIONBIO)189.864 179 Q F2(set/clear nonblocking \215ag)269.064 179 Q F4(int)
436.672 179 Q(FIOASYNC)189.864 189 Q F2(set/clear asynchr)269.064 189 Q
(onous i/o \215ag)-.144 E F4(int)436.672 189 Q(FIONREAD)189.864 199 Q F2
(get # bytes in r)269.064 199 Q(eceive buf)-.144 E(fer)-.144 E F4(int)436.672
199 Q(FIOSETOWN)189.864 209 Q F2(set pr)269.064 209 Q(ocess ID or pr)-.144 E
(ocess gr)-.144 E(oup ID of socket)-.144 E F4(int)436.672 209 Q(FIOGETOWN)
189.864 219 Q F2(get pr)269.064 219 Q(ocess ID or pr)-.144 E(ocess gr)-.144 E
(oup ID of socket)-.144 E F4(int)436.672 219 Q 507.872 223 141.328 223 DL F2
(interface)145.328 231 Q F4(SIOCGIFCONF)189.864 231 Q F2
(get list of all interfaces)269.064 231 Q F4(struct ifconf)436.672 231 Q
(SIOCSIFADDR)189.864 241 Q F2(set interface addr)269.064 241 Q(ess)-.144 E F4
(struct ifreq)436.672 241 Q(SIOCGIFADDR)189.864 251 Q F2(get interface addr)
269.064 251 Q(ess)-.144 E F4(struct ifreq)436.672 251 Q(SIOCSIFFLAGS)189.864
261 Q F2(set interface \215ags)269.064 261 Q F4(struct ifreq)436.672 261 Q
(SIOCGIFFLAGS)189.864 271 Q F2(get interface \215ags)269.064 271 Q F4
(struct ifreq)436.672 271 Q(SIOCSIFDSTADDR)189.864 281 Q F2
(set point-to-point addr)269.064 281 Q(ess)-.144 E F4(struct ifreq)436.672 281
Q(SIOCGIFDSTADDR)189.864 291 Q F2(get point-to-point addr)269.064 291 Q(ess)
-.144 E F4(struct ifreq)436.672 291 Q(SIOCGIFBRDADDR)189.864 301 Q F2(get br)
269.064 301 Q(oadcast addr)-.144 E(ess)-.144 E F4(struct ifreq)436.672 301 Q
(SIOCSIFBRDADDR)189.864 311 Q F2(set br)269.064 311 Q(oadcast addr)-.144 E(ess)
-.144 E F4(struct ifreq)436.672 311 Q(SIOCGIFNETMASK)189.864 321 Q F2
(get subnet mask)269.064 321 Q F4(struct ifreq)436.672 321 Q(SIOCSIFNETMASK)
189.864 331 Q F2(set subnet mask)269.064 331 Q F4(struct ifreq)436.672 331 Q
(SIOCGIFMETRIC)189.864 341 Q F2(get interface metric)269.064 341 Q F4
(struct ifreq)436.672 341 Q(SIOCSIFMETRIC)189.864 351 Q F2
(set interface metric)269.064 351 Q F4(struct ifreq)436.672 351 Q(SIOC)189.864
361 Q F3(xxx)A F2(\(many mor)269.064 361 Q(e; implementation dependent\))-.144
E 507.872 365 141.328 365 DL(ARP)145.328 373 Q F4(SIOCSARP)189.864 373 Q F2(cr)
269.064 373 Q(eate/modify ARP entry)-.144 E F4(struct arpreq)436.672 373 Q
(SIOCGARP)189.864 383 Q F2(get ARP entry)269.064 383 Q F4(struct arpreq)436.672
383 Q(SIOCDARP)189.864 393 Q F2(delete ARP entry)269.064 393 Q F4
(struct arpreq)436.672 393 Q 507.872 397 141.328 397 DL F2 -.144(ro)145.328 405
S(uting).144 E F4(SIOCADDRT)189.864 405 Q F2(add r)269.064 405 Q(oute)-.144 E
F4(struct rtentry)436.672 405 Q(SIOCDELRT)189.864 415 Q F2(delete r)269.064 415
Q(oute)-.144 E F4(struct rtentry)436.672 415 Q 507.872 419 141.328 419 DL F2
(str)145.328 427 Q(eams)-.144 E F4(I_)189.864 427 Q F3(xxx)A F2
(\(see Section 33.5\))269.064 427 Q 507.872 431 141.328 431 DL 430.672 125
430.672 431 DL 263.064 125 263.064 431 DL 183.864 125 183.864 431 DL 507.872
125 507.872 431 DL 141.328 125 141.328 431 DL/F5 8/Palatino-Bold@0 SF
(Figure 16.1)228.648 449 Q F2(Summary of networking)6 E F4(ioctl)2 E F2 -.144
(re)2 G(quests.).144 E/F6 10/Courier@0 SF(SIOCGPGRP)129.6 486.2 Q/F7 10
/Palatino-Roman@0 SF .63(Return thr)201.6 486.2 R .631
(ough the integer pointed to by the thir)-.18 F 3.131(da)-.18 G -.18(rg)435.888
486.2 S .631(ument either the).18 F(pr)201.6 498.2 Q 1.061(ocess ID or the pr)
-.18 F 1.061(ocess gr)-.18 F 1.061(oup ID that is set to r)-.18 F 1.06
(eceive the)-.18 F F6(SIGIO)3.56 E F7(or)3.56 E F6(SIGURG)201.6 510.2 Q F7 .719
(signal for this socket.)3.219 F .719(This r)5.719 F .719
(equest is identical to an)-.18 F F6(fcntl)3.22 E F7(of)3.22 E F6(F_GETOWN)
201.6 522.2 Q F7 1.643(and we note in Figur)4.143 F 4.143(e7)-.18 G 1.643
(.15 that Posix.1g standar)366.198 522.2 R 1.643(dizes the)-.18 F F6(fcntl)
201.6 534.2 Q F7(.)A F6(SIOCSPGRP)129.6 550.2 Q F7 .834(Set either the pr)201.6
550.2 R .834(ocess ID or the pr)-.18 F .835(ocess gr)-.18 F .835(oup ID to r)
-.18 F .835(eceive the)-.18 F F6(SIGIO)3.335 E F7(or)201.6 562.2 Q F6(SIGURG)
2.553 E F7 .053(signal for this socket fr)2.553 F .052
(om the integer pointed to by the thir)-.18 F(d)-.18 E(ar)201.6 574.2 Q 3.333
(gument. This)-.18 F -.18(re)3.333 G .833(quest is identical to an).18 F F6
(fcntl)3.334 E F7(of)3.334 E F6(F_SETOWN)3.334 E F7 .834(and we)3.334 F
(note in Figur)201.6 586.2 Q 2.5(e7)-.18 G(.15 that Posix.1g standar)270.78
586.2 Q(dizes the)-.18 E F6(fcntl)2.5 E F7(.)A/F8 12/Helvetica-Bold@0 SF 9.312
(16.4 File)93.6 622.2 R(Operations)6.672 E F7 1.024(The next gr)129.6 646.2 R
1.024(oup of r)-.18 F 1.024(equests begin with)-.18 F F6(FIO)3.524 E F7 1.024
(and may apply to certain types of \214les, in)3.524 F .386
(addition to sockets.)129.6 658.2 R 2.226 -.92(We c)5.386 H .387
(over only the r).92 F .387(equests that apply to sockets \(p. 553 of TCPv2\).)
-.18 F EP
UpDict13007 begin UpState restore UpShowpage end
%%Page: ? 2
UpDict13007 begin
save /UpState exch def

8.50 inch -0.55 inch translate rotL 0.80 dup scale

end
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Palatino-Bold@0 SF(428)93.6 82 Q/F1 9/Courier@0 SF(ioctl)125.1 82 Q/F2 9
/Palatino-Roman@0 SF 272.802(Operations Chapter)4.5 F(16)2.25 E .32 LW 97.6
89.2 93.6 89.2 DL 99.6 89.2 95.6 89.2 DL 103.6 89.2 99.6 89.2 DL 107.6 89.2
103.6 89.2 DL 111.6 89.2 107.6 89.2 DL 115.6 89.2 111.6 89.2 DL 119.6 89.2
115.6 89.2 DL 123.6 89.2 119.6 89.2 DL 127.6 89.2 123.6 89.2 DL 131.6 89.2
127.6 89.2 DL 135.6 89.2 131.6 89.2 DL 139.6 89.2 135.6 89.2 DL 143.6 89.2
139.6 89.2 DL 147.6 89.2 143.6 89.2 DL 151.6 89.2 147.6 89.2 DL 155.6 89.2
151.6 89.2 DL 159.6 89.2 155.6 89.2 DL 163.6 89.2 159.6 89.2 DL 167.6 89.2
163.6 89.2 DL 171.6 89.2 167.6 89.2 DL 175.6 89.2 171.6 89.2 DL 179.6 89.2
175.6 89.2 DL 183.6 89.2 179.6 89.2 DL 187.6 89.2 183.6 89.2 DL 191.6 89.2
187.6 89.2 DL 195.6 89.2 191.6 89.2 DL 199.6 89.2 195.6 89.2 DL 203.6 89.2
199.6 89.2 DL 207.6 89.2 203.6 89.2 DL 211.6 89.2 207.6 89.2 DL 215.6 89.2
211.6 89.2 DL 219.6 89.2 215.6 89.2 DL 223.6 89.2 219.6 89.2 DL 227.6 89.2
223.6 89.2 DL 231.6 89.2 227.6 89.2 DL 235.6 89.2 231.6 89.2 DL 239.6 89.2
235.6 89.2 DL 243.6 89.2 239.6 89.2 DL 247.6 89.2 243.6 89.2 DL 251.6 89.2
247.6 89.2 DL 255.6 89.2 251.6 89.2 DL 259.6 89.2 255.6 89.2 DL 263.6 89.2
259.6 89.2 DL 267.6 89.2 263.6 89.2 DL 271.6 89.2 267.6 89.2 DL 275.6 89.2
271.6 89.2 DL 279.6 89.2 275.6 89.2 DL 283.6 89.2 279.6 89.2 DL 287.6 89.2
283.6 89.2 DL 291.6 89.2 287.6 89.2 DL 295.6 89.2 291.6 89.2 DL 299.6 89.2
295.6 89.2 DL 303.6 89.2 299.6 89.2 DL 307.6 89.2 303.6 89.2 DL 311.6 89.2
307.6 89.2 DL 315.6 89.2 311.6 89.2 DL 319.6 89.2 315.6 89.2 DL 323.6 89.2
319.6 89.2 DL 327.6 89.2 323.6 89.2 DL 331.6 89.2 327.6 89.2 DL 335.6 89.2
331.6 89.2 DL 339.6 89.2 335.6 89.2 DL 343.6 89.2 339.6 89.2 DL 347.6 89.2
343.6 89.2 DL 351.6 89.2 347.6 89.2 DL 355.6 89.2 351.6 89.2 DL 359.6 89.2
355.6 89.2 DL 363.6 89.2 359.6 89.2 DL 367.6 89.2 363.6 89.2 DL 371.6 89.2
367.6 89.2 DL 375.6 89.2 371.6 89.2 DL 379.6 89.2 375.6 89.2 DL 383.6 89.2
379.6 89.2 DL 387.6 89.2 383.6 89.2 DL 391.6 89.2 387.6 89.2 DL 395.6 89.2
391.6 89.2 DL 399.6 89.2 395.6 89.2 DL 403.6 89.2 399.6 89.2 DL 407.6 89.2
403.6 89.2 DL 411.6 89.2 407.6 89.2 DL 415.6 89.2 411.6 89.2 DL 419.6 89.2
415.6 89.2 DL 423.6 89.2 419.6 89.2 DL 427.6 89.2 423.6 89.2 DL 431.6 89.2
427.6 89.2 DL 435.6 89.2 431.6 89.2 DL 439.6 89.2 435.6 89.2 DL 443.6 89.2
439.6 89.2 DL 447.6 89.2 443.6 89.2 DL 451.6 89.2 447.6 89.2 DL 455.6 89.2
451.6 89.2 DL 459.6 89.2 455.6 89.2 DL 463.6 89.2 459.6 89.2 DL 467.6 89.2
463.6 89.2 DL 471.6 89.2 467.6 89.2 DL 475.6 89.2 471.6 89.2 DL 479.6 89.2
475.6 89.2 DL 483.6 89.2 479.6 89.2 DL 487.6 89.2 483.6 89.2 DL 491.6 89.2
487.6 89.2 DL 495.6 89.2 491.6 89.2 DL 499.6 89.2 495.6 89.2 DL 503.6 89.2
499.6 89.2 DL 507.6 89.2 503.6 89.2 DL 511.6 89.2 507.6 89.2 DL 515.6 89.2
511.6 89.2 DL 519.6 89.2 515.6 89.2 DL/F3 10/Palatino-Roman@0 SF 1.573
(The following \214ve r)129.6 123 R 1.572(equests all r)-.18 F(equir)-.18 E
4.072(et)-.18 G 1.572(hat the thir)312.424 123 R 4.072(da)-.18 G -.18(rg)379.46
123 S 1.572(ument to).18 F/F4 10/Courier@0 SF(ioctl)4.072 E F3 1.572
(point to an)4.072 F(integer)129.6 135 Q(.)-.74 E F4(FIONBIO)129.6 159 Q F3
.676(The nonblocking \215ag for the socket is clear)201.6 159 R .677
(ed or turned on, depending)-.18 F .072(whether the thir)201.6 171 R 2.572(da)
-.18 G -.18(rg)286.826 171 S .072(ument to).18 F F4(ioctl)2.572 E F3 .072
(points to a zer)2.572 F 2.571(oo)-.18 G 2.571(rn)447.508 171 S(onzer)459.849
171 Q 2.571(ov)-.18 G(alue,)498.37 171 Q -.18(re)201.6 183 S(spectively).18 E
10.84(.T)-1.11 G 5.84(his r)273.08 183 R 5.84(equest accomplishes the same ef)
-.18 F 5.84(fect as the)-.18 F F4(O_NONBLOCK)201.6 195 Q F3 3.266
(\214le status \215ag that can be set and clear)5.767 F 3.266(ed with the)-.18
F F4(F_SETFL)201.6 207 Q F3(command to the)2.5 E F4(fcntl)2.5 E F3(function.)
2.5 E F4(FIOASYNC)129.6 223 Q F3 .789(The \215ag that governs the r)201.6 223 R
.789(eceipt of asynchr)-.18 F .789(onous I/O signals \()-.18 F F4(SIGIO)A F3
(\))A 2.146(for the socket is clear)201.6 235 R 2.145
(ed or turned on, depending whether the thir)-.18 F(d)-.18 E(ar)201.6 247 Q
2.386(gument to)-.18 F F4(ioctl)4.886 E F3 2.386(points to a zer)4.886 F 4.886
(oo)-.18 G 4.886(rn)383.482 247 S(onzer)398.138 247 Q 4.886(ov)-.18 G 2.386
(alue, r)438.974 247 R(espectively)-.18 E(.)-1.11 E 1.241
(This \215ag accomplishes the same ef)201.6 259 R 1.241(fect as the)-.18 F F4
(O_ASYNC)3.741 E F3 1.241(\214le status \215ag)3.741 F .897
(that can be set and clear)201.6 271 R .897(ed with the)-.18 F F4(F_SETFL)3.398
E F3 .898(command to the)3.398 F F4(fcntl)3.398 E F3(function.)201.6 283 Q F4
(FIONREAD)129.6 299 Q F3 1.519(Return in the integer pointed to by the thir)
201.6 299 R 4.019(da)-.18 G -.18(rg)416.893 299 S 1.519(ument to).18 F F4
(ioctl)4.019 E F3(the)4.019 E .24(number of bytes curr)201.6 311 R .24
(ently in the socket r)-.18 F .24(eceive buf)-.18 F(fer)-.18 E 5.24(.T)-.74 G
.24(his featur)452.57 311 R 2.74(ea)-.18 G(lso)506.99 311 Q .968
(works for \214les, pipes, and terminals.)201.6 323 R 2.808 -.92(We s)5.968 H
.968(aid mor).92 F 3.468(ea)-.18 G .968(bout this r)443.674 323 R(equest)-.18 E
(in Section 13.7.)201.6 335 Q F4(FIOSETOWN)129.6 351 Q F3(Equivalent to)201.6
351 Q F4(SIOCSPGRP)2.5 E F3(for a socket.)2.5 E F4(FIOGETOWN)129.6 367 Q F3
(Equivalent to)201.6 367 Q F4(SIOCGPGRP)2.5 E F3(for a socket.)2.5 E/F5 12
/Helvetica-Bold@0 SF 9.312(16.5 Interface)93.6 403 R(Con\214guration)6.672 E F3
.013(One of the \214rst steps employed by many pr)129.6 427 R .014
(ograms that deal with the network interfaces)-.18 F .028
(on a system is to obtain fr)129.6 439 R .028
(om the kernel all the interfaces con\214gur)-.18 F .028(ed on the system.)-.18
F(This)5.028 E 1.728(is done with the)129.6 451 R F4(SIOCGIFCONF)4.228 E F3
-.18(re)4.228 G 1.728(quest, which uses the).18 F F4(ifconf)4.229 E F3(str)
4.229 E(uctur)-.08 E 1.729(e, which in)-.18 F(turn uses the)129.6 463 Q F4
(ifreq)2.5 E F3(str)2.5 E(uctur)-.08 E(e, both of which ar)-.18 E 2.5(es)-.18 G
(hown in Figur)350.51 463 Q 2.5(e1)-.18 G(6.2.)425.8 463 Q(Befor)147.6 475 Q
2.801(ec)-.18 G(alling)183.091 475 Q F4(ioctl)2.801 E F3 .301
(we allocate a buf)2.801 F .301(fer and an)-.18 F F4(ifconf)2.801 E F3(str)
2.801 E(uctur)-.08 E 2.8(ea)-.18 G .3(nd then initial-)453.33 475 R .307
(ize the latter)129.6 487 R 5.307(.W)-.74 G 2.807(es)201.101 487 S .307
(how a pictur)212.938 487 R 2.808(eo)-.18 G 2.808(ft)282.65 487 S .308
(his in Figur)292.048 487 R 2.808(e1)-.18 G .308
(6.3 \(p. 430\), assuming our buf)355.792 487 R .308(fer size)-.18 F
(is 1024 bytes.)129.6 499 Q(The thir)5 E 2.5(da)-.18 G -.18(rg)241.24 499 S
(ument to).18 E F4(ioctl)2.5 E F3(is a pointer to our)2.5 E F4(ifconf)2.5 E F3
(str)2.5 E(uctur)-.08 E(e.)-.18 E 2.227(If we assume that the kernel r)147.6
511 R 2.227(eturns two)-.18 F F4(ifreq)4.727 E F3(str)4.727 E(uctur)-.08 E
2.227(es, we could have the)-.18 F 2.851(arrangement shown in Figur)129.6 523 R
5.351(e1)-.18 G 2.852(6.4 \(p. 430\) when the)279.804 523 R F4(ioctl)5.352 E F3
-.18(re)5.352 G 5.352(turns. The).18 F(shaded)5.352 E -.18(re)129.6 535 S .265
(gions have been modi\214ed by).18 F F4(ioctl)2.765 E F3 5.265(.T)C .265
(he buf)313.41 535 R .264(fer has been \214lled in with the two str)-.18 F(uc-)
-.08 E(tur)129.6 547 Q .144(es and the)-.18 F F4(ifc_len)2.644 E F3 .144
(member of the)2.644 F F4(ifconf)2.644 E F3(str)2.644 E(uctur)-.08 E 2.644(eh)
-.18 G .145(as been updated to r)389.176 547 R .145(e\215ect the)-.18 F .875
(amount of information stor)129.6 559 R .874(ed in the buf)-.18 F(fer)-.18 E
5.874(.W)-.74 G 3.374(ea)339.512 559 S .874(ssume in this \214gur)352.676 559 R
3.374(et)-.18 G .874(hat each)448.722 559 R F4(ifreq)3.374 E F3(str)129.6 571 Q
(uctur)-.08 E 2.5(eo)-.18 G(ccupies 32 bytes.)177.25 571 Q 2.79(Ap)147.6 583 S
.29(ointer to an)164.18 583 R F4(ifreq)2.79 E F3(str)2.79 E(uctur)-.08 E 2.791
(ei)-.18 G 2.791(sa)296.461 583 S .291(lso used as an ar)308.492 583 R .291
(gument to the r)-.18 F .291(emaining inter)-.18 F(-)-.18 E(face)129.6 595 Q F4
(ioctl)3.16 E F3 3.16(ss)C .66(hown in Figur)191.96 595 R 3.159(e1)-.18 G .659
(6.1, which we describe in Section 16.7.)269.229 595 R .659(Notice that each)
5.659 F F4(ifreq)129.6 607 Q F3(str)3.536 E(uctur)-.08 E 3.537(ec)-.18 G 1.037
(ontains a)210.803 607 R F4(union)3.537 E F3 1.037(and ther)3.537 F 3.537(ea)
-.18 G 1.397 -.18(re n)340.358 607 T(umer).18 E(ous)-.18 E F4(#define)3.537 E
F3 3.537(st)C 3.537(oh)453.999 607 S 1.037(ide the fact)468.816 607 R .389
(that these \214elds ar)129.6 619 R 2.889(em)-.18 G .389(embers of a)227.886
619 R F4(union)2.889 E F3 5.389(.A)C .388(ll the r)328.142 619 R(efer)-.18 E
.388(ences to the individual members)-.18 F(ar)129.6 631 Q 4.44(em)-.18 G 1.94
(ade using the de\214ned names.)156.43 631 R 1.94(Be awar)6.94 F 4.44(et)-.18 G
1.94(hat some systems have added many)350.25 631 R
(implementation-dependent members to the)129.6 643 Q F4 -3.5(ifr_ifru union)2.5
F F3(.)A EP
UpDict13007 begin
moveR
end
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Palatino-Roman@0 SF(Section 16.6)93.6 82 Q/F1 9/Courier@0 SF
(get_ifi_info)383.43 82 Q F0(Function)4.5 E/F2 9/Palatino-Bold@0 SF(429)506.1
82 Q .32 LW 97.6 89.2 93.6 89.2 DL 99.6 89.2 95.6 89.2 DL 103.6 89.2 99.6 89.2
DL 107.6 89.2 103.6 89.2 DL 111.6 89.2 107.6 89.2 DL 115.6 89.2 111.6 89.2 DL
119.6 89.2 115.6 89.2 DL 123.6 89.2 119.6 89.2 DL 127.6 89.2 123.6 89.2 DL
131.6 89.2 127.6 89.2 DL 135.6 89.2 131.6 89.2 DL 139.6 89.2 135.6 89.2 DL
143.6 89.2 139.6 89.2 DL 147.6 89.2 143.6 89.2 DL 151.6 89.2 147.6 89.2 DL
155.6 89.2 151.6 89.2 DL 159.6 89.2 155.6 89.2 DL 163.6 89.2 159.6 89.2 DL
167.6 89.2 163.6 89.2 DL 171.6 89.2 167.6 89.2 DL 175.6 89.2 171.6 89.2 DL
179.6 89.2 175.6 89.2 DL 183.6 89.2 179.6 89.2 DL 187.6 89.2 183.6 89.2 DL
191.6 89.2 187.6 89.2 DL 195.6 89.2 191.6 89.2 DL 199.6 89.2 195.6 89.2 DL
203.6 89.2 199.6 89.2 DL 207.6 89.2 203.6 89.2 DL 211.6 89.2 207.6 89.2 DL
215.6 89.2 211.6 89.2 DL 219.6 89.2 215.6 89.2 DL 223.6 89.2 219.6 89.2 DL
227.6 89.2 223.6 89.2 DL 231.6 89.2 227.6 89.2 DL 235.6 89.2 231.6 89.2 DL
239.6 89.2 235.6 89.2 DL 243.6 89.2 239.6 89.2 DL 247.6 89.2 243.6 89.2 DL
251.6 89.2 247.6 89.2 DL 255.6 89.2 251.6 89.2 DL 259.6 89.2 255.6 89.2 DL
263.6 89.2 259.6 89.2 DL 267.6 89.2 263.6 89.2 DL 271.6 89.2 267.6 89.2 DL
275.6 89.2 271.6 89.2 DL 279.6 89.2 275.6 89.2 DL 283.6 89.2 279.6 89.2 DL
287.6 89.2 283.6 89.2 DL 291.6 89.2 287.6 89.2 DL 295.6 89.2 291.6 89.2 DL
299.6 89.2 295.6 89.2 DL 303.6 89.2 299.6 89.2 DL 307.6 89.2 303.6 89.2 DL
311.6 89.2 307.6 89.2 DL 315.6 89.2 311.6 89.2 DL 319.6 89.2 315.6 89.2 DL
323.6 89.2 319.6 89.2 DL 327.6 89.2 323.6 89.2 DL 331.6 89.2 327.6 89.2 DL
335.6 89.2 331.6 89.2 DL 339.6 89.2 335.6 89.2 DL 343.6 89.2 339.6 89.2 DL
347.6 89.2 343.6 89.2 DL 351.6 89.2 347.6 89.2 DL 355.6 89.2 351.6 89.2 DL
359.6 89.2 355.6 89.2 DL 363.6 89.2 359.6 89.2 DL 367.6 89.2 363.6 89.2 DL
371.6 89.2 367.6 89.2 DL 375.6 89.2 371.6 89.2 DL 379.6 89.2 375.6 89.2 DL
383.6 89.2 379.6 89.2 DL 387.6 89.2 383.6 89.2 DL 391.6 89.2 387.6 89.2 DL
395.6 89.2 391.6 89.2 DL 399.6 89.2 395.6 89.2 DL 403.6 89.2 399.6 89.2 DL
407.6 89.2 403.6 89.2 DL 411.6 89.2 407.6 89.2 DL 415.6 89.2 411.6 89.2 DL
419.6 89.2 415.6 89.2 DL 423.6 89.2 419.6 89.2 DL 427.6 89.2 423.6 89.2 DL
431.6 89.2 427.6 89.2 DL 435.6 89.2 431.6 89.2 DL 439.6 89.2 435.6 89.2 DL
443.6 89.2 439.6 89.2 DL 447.6 89.2 443.6 89.2 DL 451.6 89.2 447.6 89.2 DL
455.6 89.2 451.6 89.2 DL 459.6 89.2 455.6 89.2 DL 463.6 89.2 459.6 89.2 DL
467.6 89.2 463.6 89.2 DL 471.6 89.2 467.6 89.2 DL 475.6 89.2 471.6 89.2 DL
479.6 89.2 475.6 89.2 DL 483.6 89.2 479.6 89.2 DL 487.6 89.2 483.6 89.2 DL
491.6 89.2 487.6 89.2 DL 495.6 89.2 491.6 89.2 DL 499.6 89.2 495.6 89.2 DL
503.6 89.2 499.6 89.2 DL 507.6 89.2 503.6 89.2 DL 511.6 89.2 507.6 89.2 DL
515.6 89.2 511.6 89.2 DL 519.6 89.2 515.6 89.2 DL .4 LW 134.6 124.2 129.6 124.2
DL 135.522 124.2 130.522 124.2 DL 140.522 124.2 135.522 124.2 DL 145.522 124.2
140.522 124.2 DL 150.522 124.2 145.522 124.2 DL 155.522 124.2 150.522 124.2 DL
160.522 124.2 155.522 124.2 DL 165.522 124.2 160.522 124.2 DL 170.522 124.2
165.522 124.2 DL 175.522 124.2 170.522 124.2 DL 180.522 124.2 175.522 124.2 DL
185.522 124.2 180.522 124.2 DL 190.522 124.2 185.522 124.2 DL 195.522 124.2
190.522 124.2 DL 200.522 124.2 195.522 124.2 DL 205.522 124.2 200.522 124.2 DL
210.522 124.2 205.522 124.2 DL 215.522 124.2 210.522 124.2 DL 220.522 124.2
215.522 124.2 DL 225.522 124.2 220.522 124.2 DL 230.522 124.2 225.522 124.2 DL
235.522 124.2 230.522 124.2 DL 240.522 124.2 235.522 124.2 DL 245.522 124.2
240.522 124.2 DL 250.522 124.2 245.522 124.2 DL 255.522 124.2 250.522 124.2 DL
260.522 124.2 255.522 124.2 DL 265.522 124.2 260.522 124.2 DL 270.522 124.2
265.522 124.2 DL 275.522 124.2 270.522 124.2 DL 280.522 124.2 275.522 124.2 DL
285.522 124.2 280.522 124.2 DL 290.522 124.2 285.522 124.2 DL 295.522 124.2
290.522 124.2 DL 300.522 124.2 295.522 124.2 DL 305.522 124.2 300.522 124.2 DL
310.522 124.2 305.522 124.2 DL 315.522 124.2 310.522 124.2 DL 320.522 124.2
315.522 124.2 DL 325.522 124.2 320.522 124.2 DL 330.522 124.2 325.522 124.2 DL
335.522 124.2 330.522 124.2 DL 340.522 124.2 335.522 124.2 DL 345.522 124.2
340.522 124.2 DL 350.522 124.2 345.522 124.2 DL 355.522 124.2 350.522 124.2 DL
360.522 124.2 355.522 124.2 DL 365.522 124.2 360.522 124.2 DL 370.522 124.2
365.522 124.2 DL 375.522 124.2 370.522 124.2 DL 380.522 124.2 375.522 124.2 DL
385.522 124.2 380.522 124.2 DL 390.522 124.2 385.522 124.2 DL 395.522 124.2
390.522 124.2 DL 400.522 124.2 395.522 124.2 DL 405.522 124.2 400.522 124.2 DL
410.522 124.2 405.522 124.2 DL 415.522 124.2 410.522 124.2 DL 420.522 124.2
415.522 124.2 DL 425.522 124.2 420.522 124.2 DL 430.522 124.2 425.522 124.2 DL
435.522 124.2 430.522 124.2 DL 440.522 124.2 435.522 124.2 DL 445.522 124.2
440.522 124.2 DL 450.522 124.2 445.522 124.2 DL 455.522 124.2 450.522 124.2 DL
460.522 124.2 455.522 124.2 DL 465.522 124.2 460.522 124.2 DL 470.522 124.2
465.522 124.2 DL 475.522 124.2 470.522 124.2 DL 480.522 124.2 475.522 124.2 DL
/F3 9/Palatino-Italic@0 SF(<net/if.h>)482.772 126.7 Q/F4 8.15/Courier@0 SF
(struct ifconf {)129.6 133.001 Q 4.89(int ifc_len;)149.16 143.001 R
(/* size of buffer, value-result */)305.64 143.001 Q(union {)149.16 153.001 Q
(caddr_t ifcu_buf;)168.72 163.001 Q(/* input from user -> kernel */)305.64
163.001 Q 4.89(struct ifreq)168.72 173.001 R 14.67(*ifcu_req; /*)4.89 F
(return from kernel -> user */)4.89 E 4.89(}i)149.16 183.001 S(fc_ifcu;)163.83
183.001 Q(};)129.6 193.001 Q 4.89(#define ifc_buf ifc_ifcu.ifcu_buf)129.6
203.001 R(/* buffer address */)4.89 E 4.89(#define ifc_req ifc_ifcu.ifcu_req)
129.6 213.001 R(/* array of structures returned */)4.89 E 4.89
(#define IFNAMSIZ)129.6 231.001 R(16)232.29 231.001 Q(struct ifreq {)129.6
249.001 Q 14.67(char ifr_name[IFNAMSIZ];)149.16 259.001 R
(/* interface name, e.g., "le0" */)305.64 259.001 Q(union {)149.16 269.001 Q
4.89(struct sockaddr)168.72 279.001 R(ifru_addr;)4.89 E 4.89(struct sockaddr)
168.72 289.001 R(ifru_dstaddr;)4.89 E 4.89(struct sockaddr)168.72 299.001 R
(ifru_broadaddr;)4.89 E 9.78(short ifru_flags;)168.72 309.001 R 19.56
(int ifru_metric;)168.72 319.001 R(caddr_t ifru_data;)168.72 329.001 Q 4.89(}i)
149.16 339.001 S(fr_ifru;)163.83 339.001 Q(};)129.6 349.001 Q 4.89
(#define ifr_addr)129.6 359.001 R 24.45(ifr_ifru.ifru_addr /*)246.96 359.001 R
(address */)4.89 E 4.89(#define ifr_dstaddr)129.6 369.001 R 9.78
(ifr_ifru.ifru_dstaddr /*)246.96 369.001 R(other end of p-to-p link */)4.89 E
4.89(#define ifr_broadaddr ifr_ifru.ifru_broadaddr)129.6 379.001 R
(/* broadcast address */)4.89 E 4.89(#define ifr_flags)129.6 389.001 R 19.56
(ifr_ifru.ifru_flags /*)246.96 389.001 R(flags */)4.89 E 4.89
(#define ifr_metric)129.6 399.001 R 14.67(ifr_ifru.ifru_metric /*)246.96
399.001 R(metric */)4.89 E 4.89(#define ifr_data)129.6 409.001 R 24.45
(ifr_ifru.ifru_data /*)246.96 409.001 R(for use by interface */)4.89 E 134.6
416.802 129.6 416.802 DL 135.522 416.802 130.522 416.802 DL 140.522 416.802
135.522 416.802 DL 145.522 416.802 140.522 416.802 DL 150.522 416.802 145.522
416.802 DL 155.522 416.802 150.522 416.802 DL 160.522 416.802 155.522 416.802
DL 165.522 416.802 160.522 416.802 DL 170.522 416.802 165.522 416.802 DL
175.522 416.802 170.522 416.802 DL 180.522 416.802 175.522 416.802 DL 185.522
416.802 180.522 416.802 DL 190.522 416.802 185.522 416.802 DL 195.522 416.802
190.522 416.802 DL 200.522 416.802 195.522 416.802 DL 205.522 416.802 200.522
416.802 DL 210.522 416.802 205.522 416.802 DL 215.522 416.802 210.522 416.802
DL 220.522 416.802 215.522 416.802 DL 225.522 416.802 220.522 416.802 DL
230.522 416.802 225.522 416.802 DL 235.522 416.802 230.522 416.802 DL 240.522
416.802 235.522 416.802 DL 245.522 416.802 240.522 416.802 DL 250.522 416.802
245.522 416.802 DL 255.522 416.802 250.522 416.802 DL 260.522 416.802 255.522
416.802 DL 265.522 416.802 260.522 416.802 DL 270.522 416.802 265.522 416.802
DL 275.522 416.802 270.522 416.802 DL 280.522 416.802 275.522 416.802 DL
285.522 416.802 280.522 416.802 DL 290.522 416.802 285.522 416.802 DL 295.522
416.802 290.522 416.802 DL 300.522 416.802 295.522 416.802 DL 305.522 416.802
300.522 416.802 DL 310.522 416.802 305.522 416.802 DL 315.522 416.802 310.522
416.802 DL 320.522 416.802 315.522 416.802 DL 325.522 416.802 320.522 416.802
DL 330.522 416.802 325.522 416.802 DL 335.522 416.802 330.522 416.802 DL
340.522 416.802 335.522 416.802 DL 345.522 416.802 340.522 416.802 DL 350.522
416.802 345.522 416.802 DL 355.522 416.802 350.522 416.802 DL 360.522 416.802
355.522 416.802 DL 365.522 416.802 360.522 416.802 DL 370.522 416.802 365.522
416.802 DL 375.522 416.802 370.522 416.802 DL 380.522 416.802 375.522 416.802
DL 385.522 416.802 380.522 416.802 DL 390.522 416.802 385.522 416.802 DL
395.522 416.802 390.522 416.802 DL 400.522 416.802 395.522 416.802 DL 405.522
416.802 400.522 416.802 DL 410.522 416.802 405.522 416.802 DL 415.522 416.802
410.522 416.802 DL 420.522 416.802 415.522 416.802 DL 425.522 416.802 420.522
416.802 DL 430.522 416.802 425.522 416.802 DL 435.522 416.802 430.522 416.802
DL 440.522 416.802 435.522 416.802 DL 445.522 416.802 440.522 416.802 DL
450.522 416.802 445.522 416.802 DL 455.522 416.802 450.522 416.802 DL 460.522
416.802 455.522 416.802 DL 465.522 416.802 460.522 416.802 DL 470.522 416.802
465.522 416.802 DL 475.522 416.802 470.522 416.802 DL 480.522 416.802 475.522
416.802 DL F3(<net/if.h>)482.772 419.302 Q/F5 8/Palatino-Bold@0 SF(Figure 16.2)
169.176 432.802 Q/F6 8/Courier@0 SF(ifconf)6 E/F7 8/Palatino-Roman@0 SF(and)2 E
F6(ifreq)2 E F7(str)2 E(uctur)-.064 E(es used with various interface)-.144 E F6
(ioctl)2 E F7 -.144(re)2 G(quests.).144 E/F8 12/Helvetica-Bold@0 SF(16.6)93.6
490.402 Q/F9 12/Courier-Bold@0 SF(get_ifi_info)129.6 490.402 Q F8(Function)
6.672 E/F10 10/Palatino-Roman@0 SF 1.201(Since many pr)129.6 514.402 R 1.201
(ograms need to know all the interfaces on a system, we will develop a)-.18 F
.547(function of our own named)129.6 526.402 R/F11 10/Courier@0 SF
(get_ifi_info)3.048 E F10 .548(that r)3.048 F .548(eturns a linked list of str)
-.18 F(uctur)-.08 E .548(es, one)-.18 F .25(for each interface that is curr)
129.6 538.402 R .249(ently `)-.18 F(`up.')-.37 E 5.249('I)-.37 G 2.749(nt)
315.737 538.402 S .249(his section we will implement this function)327.566
538.402 R 1.783(using the)129.6 550.402 R F11 -1.716(SIOCGIFCONF ioctl)4.283 F
F10 1.784(and in Chapter 17 we will develop a version using)4.284 F -.18(ro)
129.6 562.402 S(uting sockets.).18 E F7(BSD/OS pr)183.6 582.402 Q
(ovides a function named)-.144 E F6(getifaddrs)2 E F7
(with similar functionality)2 E(.)-.888 E(Sear)183.6 602.402 Q .522
(ching the entir)-.144 F 2.522(eB)-.144 G .522(SD/OS 2.1 sour)262.11 602.402 R
.522(ce tr)-.144 F .522(ee shows that 12 pr)-.144 F .522(ograms issue the)-.144
F F6(SIOCGIFCONF)2.521 E(ioctl)183.6 612.402 Q F7
(to determine the interfaces that ar)2 E 2(ep)-.144 G -.144(re)339.424 612.402
S(sent.).144 E F10 2.476 -.92(We \214)147.6 630.402 T .636(rst de\214ne the).92
F F11(ifi_info)3.136 E F10(str)3.137 E(uctur)-.08 E 3.137(ei)-.18 G 3.137(nan)
329.818 630.402 S .637(ew header named)352.732 630.402 R F11(unpifi.h)3.137 E
F10 3.137(,s)C(hown)494.16 630.402 Q(in Figur)129.6 642.402 Q 2.5(e1)-.18 G
(6.5.)176.95 642.402 Q EP
UpDict13007 begin UpState restore UpShowpage end
%%Trailer
end
%%EOF
%%Pages: 2
