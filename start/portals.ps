%!PS-Adobe-3.0
%%Creator: groff version 1.08
%%DocumentNeededResources: font Times-Bold
%%+ font Times-Roman
%%+ font Times-Italic
%%+ font Courier
%%+ font Symbol
%%+ font Courier-Bold
%%DocumentSuppliedResources: procset grops 1.08 0
%%Pages: 10
%%PageOrder: Ascend
%%Orientation: Portrait
%%EndComments
%%BeginProlog
%%BeginResource: procset grops 1.08 0
/setpacking where{
pop
currentpacking
true setpacking
}if
/grops 120 dict dup begin
/SC 32 def
/A/show load def
/B{0 SC 3 -1 roll widthshow}bind def
/C{0 exch ashow}bind def
/D{0 exch 0 SC 5 2 roll awidthshow}bind def
/E{0 rmoveto show}bind def
/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
/G{0 rmoveto 0 exch ashow}bind def
/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/I{0 exch rmoveto show}bind def
/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
/K{0 exch rmoveto 0 exch ashow}bind def
/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/M{rmoveto show}bind def
/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
/O{rmoveto 0 exch ashow}bind def
/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/Q{moveto show}bind def
/R{moveto 0 SC 3 -1 roll widthshow}bind def
/S{moveto 0 exch ashow}bind def
/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/SF{
findfont exch
[exch dup 0 exch 0 exch neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/MF{
findfont
[5 2 roll
0 3 1 roll 
neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/level0 0 def
/RES 0 def
/PL 0 def
/LS 0 def
/PLG{
gsave newpath clippath pathbbox grestore
exch pop add exch pop
}bind def
/BP{
/level0 save def
1 setlinecap
1 setlinejoin
72 RES div dup scale
LS{
90 rotate
}{
0 PL translate
}ifelse
1 -1 scale
}bind def
/EP{
level0 restore
% uncomment following lines to print trim lines
%0 setlinewidth
% 72 72 moveto 216 0 rlineto 0 648 rlineto -216 0 rlineto 0 -648 rlineto stroke
%324 72 moveto 216 0 rlineto 0 648 rlineto -216 0 rlineto 0 -648 rlineto stroke
showpage
}bind def
/DA{
newpath arcn stroke
}bind def
/SN{
transform
.25 sub exch .25 sub exch
round .25 add exch round .25 add exch
itransform
}bind def
/DL{
SN
moveto
SN
lineto stroke
}bind def
/DC{
newpath 0 360 arc closepath
}bind def
/TM matrix def
/DE{
TM currentmatrix pop
translate scale newpath 0 0 .5 0 360 arc closepath
TM setmatrix
}bind def
/RC/rcurveto load def
/RL/rlineto load def
/ST/stroke load def
/MT/moveto load def
/CL/closepath load def
/FL{
currentgray exch setgray fill setgray
}bind def
/BL/fill load def
/LW/setlinewidth load def
/RE{
findfont
dup maxlength 1 index/FontName known not{1 add}if dict begin
{
1 index/FID ne{def}{pop pop}ifelse
}forall
/Encoding exch def
dup/FontName exch def
currentdict end definefont pop
}bind def
/DEFS 0 def
/EBEGIN{
moveto
DEFS begin
}bind def
/EEND/end load def
/CNT 0 def
/level1 0 def
/PBEGIN{
/level1 save def
translate
div 3 1 roll div exch scale
neg exch neg exch translate
0 setgray
0 setlinecap
1 setlinewidth
0 setlinejoin
10 setmiterlimit
[]0 setdash
/setstrokeadjust where{
pop
false setstrokeadjust
}if
/setoverprint where{
pop
false setoverprint
}if
newpath
/CNT countdictstack def
userdict begin
/showpage{}def
}bind def
/PEND{
clear
countdictstack CNT sub{end}repeat
level1 restore
}bind def
end def
/setpacking where{
pop
setpacking
}if
%%EndResource
%%IncludeResource: font Times-Bold
%%IncludeResource: font Times-Roman
%%IncludeResource: font Times-Italic
%%IncludeResource: font Courier
%%IncludeResource: font Symbol
%%IncludeResource: font Courier-Bold
grops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72 def/PL
792 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron/scaron/zcaron
/Ydieresis/trademark/quotesingle/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/space
/exclam/quotedbl/numbersign/dollar/percent/ampersand/quoteright/parenleft
/parenright/asterisk/plus/comma/hyphen/period/slash/zero/one/two/three/four
/five/six/seven/eight/nine/colon/semicolon/less/equal/greater/question/at/A/B/C
/D/E/F/G/H/I/J/K/L/M/N/O/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash
/bracketright/circumflex/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q
/r/s/t/u/v/w/x/y/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase
/guillemotleft/guillemotright/bullet/florin/fraction/perthousand/dagger
/daggerdbl/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen/brokenbar
/section/dieresis/copyright/ordfeminine/guilsinglleft/logicalnot/minus
/registered/macron/degree/plusminus/twosuperior/threesuperior/acute/mu
/paragraph/periodcentered/cedilla/onesuperior/ordmasculine/guilsinglright
/onequarter/onehalf/threequarters/questiondown/Agrave/Aacute/Acircumflex/Atilde
/Adieresis/Aring/AE/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute
/Icircumflex/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn/germandbls
/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla/egrave/eacute
/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis/eth/ntilde/ograve
/oacute/ocircumflex/otilde/odieresis/divide/oslash/ugrave/uacute/ucircumflex
/udieresis/yacute/thorn/ydieresis]def/Courier-Bold@0 ENC0/Courier-Bold RE
/Courier@0 ENC0/Courier RE/Times-Italic@0 ENC0/Times-Italic RE/Times-Roman@0
ENC0/Times-Roman RE/Times-Bold@0 ENC0/Times-Bold RE
%%EndProlog
%%Page: 1 1
%%BeginPageSetup
BP
%%EndPageSetup
/F0 14/Times-Bold@0 SF -.28(Po)253.052 123 S(rtals in 4.4BSD).28 E/F1 12
/Times-Roman@0 SF 2.208 -1.104(W. R)258.966 147 T(ichard Ste)1.104 E -.18(ve)
-.3 G(ns).18 E/F2 12/Times-Italic@0 SF(Consultant)279.66 159 Q F1
(Jan-Simon Pendry)261.834 183 Q F2(Sequent UK)277.17 195 Q/F3 10/Times-Bold@0
SF(Abstract)161.395 243 Q/F4 10/Times-Roman@0 SF 2.391
(Portals were added to 4.4BSD as an e)97 258.6 R(xperi-)-.15 E 4.063
(mental feature and are in the publicly a)72 270.6 R -.25(va)-.2 G(ilable).25 E
1.938(4.4BSD-Lite distrib)72 282.6 R 4.438(ution. Portals)-.2 F(pro)4.438 E
1.938(vide access to)-.15 F .381(alternate \214le types or de)72 294.6 R .381
(vices using names in the nor)-.25 F(-)-.2 E 1.206
(mal \214lesystem that a process just opens.)72 306.6 R -.15(Fo)6.206 G 3.706
(re).15 G(xam-)267.45 306.6 Q .476(ple, an open of)72 318.6 R/F5 10/Courier@0
SF(/p/tcp/foo.com/smtp)2.977 E F4 .477(returns a)2.977 F 1.668(TCP sock)72
330.6 R 1.667(et descriptor to the calling process that is)-.1 F 1.015
(connected to the SMTP serv)72 342.6 R 1.015(er on the speci\214ed host.)-.15 F
1.722(By pro)72 354.6 R 1.722(viding access through the normal \214lesystem,)
-.15 F 1.225(the calling process need not be a)72 366.6 R -.1(wa)-.15 G 1.226
(re of the special).1 F .214(functions necessary to create a TCP sock)72 378.6
R .213(et and estab-)-.1 F .078(lish a TCP connection.)72 390.6 R .079
(This mak)5.079 F .079(es TCP connections,)-.1 F .425(for e)72 402.6 R .425
(xample, a)-.15 F -.25(va)-.2 G .425(ilable to programs such as A).25 F .425
(wk, Tcl,)-.92 F(and shell scripts.)72 414.6 Q 3.594
(This paper describes the implementation of)97 430.2 R 1.273
(portals in 4.4BSD as another type of \214lesystem and)72 442.2 R(pro)72 454.2
Q(vides some e)-.15 E(xamples.)-.15 E/F6 12/Times-Bold@0 SF 3(1. Intr)72 479.4
R(oduction)-.216 E F4 5.641(The Unix paradigm of)72 495 R F5(open)8.142 E F4(,)
A F5(read)8.142 E F4(,)A F5(write)8.142 E F4(,)A F5(lseek)72 507 Q F4 2.987(,a)
C(nd)111.927 507 Q F5(close)2.987 E F4 .486(has w)2.986 F(ork)-.1 E .486
(ed well for man)-.1 F 2.986(yy)-.15 G(ears)271.9 507 Q .221
(across a wide range of de)72 519 R 2.721(vices. Ha)-.25 F .222(ving de)-.2 F
.222(vices share)-.25 F 2.448(the same namespace as re)72 531 R 2.448
(gular \214les is one of the)-.15 F(man)72 543 Q 2.78(yt)-.15 G .28
(hings Unix did right.)99.63 543 R -.7(Te)5.28 G .28(rminals and netw).7 F
(orks,)-.1 E(ho)72 555 Q(we)-.25 E -.15(ve)-.25 G 3.323 -.4(r, h).15 H -2.25
-.2(av e).4 H(al)5.223 E -.1(wa)-.1 G 2.523(ys been unique and present an).1 F
(interesting set of problems.)72 567 Q .618(One problem with terminal de)97
582.6 R .619(vices is the wide)-.25 F -.25(va)72 594.6 S 2.14
(riety of modems that connect to them, and each).25 F(modem')72 606.6 Q 2.695
(su)-.55 G .195(nique command string.)116.365 606.6 R .195(This has led to the)
5.195 F .722(duplication of dialing code among v)72 618.6 R .721
(arious programs,)-.25 F(such as)72 630.6 Q F5(tip)2.5 E F4(,)A F5(cu)2.5 E F4
2.5(,a)C(nd UUCP)148.1 630.6 Q(.)-1.11 E 1.858(The problem with netw)97 646.2 R
1.859(orks is that the)-.1 F 4.359(yh)-.15 G -2.25 -.2(av e)274.47 646.2 T
3.842(their o)72 658.2 R 3.841(wn unique set of functions to create and)-.25 F
1.946(manipulate netw)72 670.2 R 1.946(ork end points.)-.1 F 1.947
(Whether using the)6.947 F(sock)72 682.2 Q 2.083(ets programming interf)-.1 F
2.083(ace or TLI, the code to)-.1 F .451(establish a netw)72 694.2 R .451
(ork end point dif)-.1 F .452(fers greatly from the)-.25 F .314
(code for normal \214le I/O [Ste)72 706.2 R -.15(ve)-.25 G .313(ns 1990].).15 F
.313(While the C)5.313 F 2.176(programmer can easily access netw)72 718.2 R
2.176(ork connections)-.1 F .752(using either sock)324 243 R .752
(ets or TLI, it has been a problem to)-.1 F .172(access netw)324 255 R .172
(ork connections using scripting languages)-.1 F .389(such as a shell or A)324
267 R 2.889(wk. One)-.92 F .389(solution, chosen by Perl)2.889 F([W)324 279 Q
1.492(all and Schw)-.8 F 1.492(artz 1991] is to place all the sock)-.1 F(et)-.1
E 1.134(calls into the language.)324 291 R 1.134(While possible, this has the)
6.134 F 3.162(unfortunate side ef)324 303 R 3.163
(fect of increasing the size and)-.25 F(comple)324 315 Q(xity of the language.)
-.15 E .54(The implementation of portals in 4.4BSD is an)349 330.6 R .715
(attempt to hide the comple)324 342.6 R .716(xity of things such as net-)-.15 F
-.1(wo)324 354.6 S 1.948(rk connections within a system-wide portal dae-).1 F
2.558(mon that is accessible to)324 366.6 R/F7 10/Times-Italic@0 SF(any)5.059 E
F4 2.559(process through the)5.059 F F5(open)324 378.6 Q F4(function.)2.5 E F6
3(2. Descriptor)324 403.8 R -.12(Pa)3 G(ssing).12 E F4 1.459(Modern v)324 419.4
R 1.458(ersions of Unix ha)-.15 F 1.758 -.15(ve s)-.2 H(upported).15 E F7
(descriptor)3.958 E(passing)324 431.4 Q F4 .71
(between unrelated processes for man)3.21 F 3.21(yy)-.15 G(ears.)521.4 431.4 Q
2.36(4.2BSD w)324 443.4 R 2.36(as the \214rst system to support this, circa)-.1
F 1.367(1983, although there were b)324 455.4 R 1.368
(ugs in the initial imple-)-.2 F 2.649(mentation, which were \214x)324 467.4 R
2.648(ed with 4.3BSD \(1986\).)-.15 F .667
(System V Release 3.2 \(1988\) also pro)324 479.4 R .668(vided a similar)-.15 F
(capability)324 491.4 Q 3.35(,a)-.65 G .85(nd a cleaner interf)373.08 491.4 R
.85(ace w)-.1 F .85(as pro)-.1 F .85(vided with)-.15 F .871
(System V Release 4 \(SVR4\).)324 503.4 R .872(Most commercial v)5.872 F(er)
-.15 E(-)-.2 E 1.753(sions of Unix today)324 515.4 R 4.253(,w)-.65 G 1.752
(hether deri)421.192 515.4 R -.15(ve)-.25 G 4.252(df).15 G 1.752(rom BSD or)
487.606 515.4 R 2.943(System V)324 527.4 R 5.443(,p)-1.29 G(ro)377.766 527.4 Q
2.943(vide this capability)-.15 F 7.944(.[)-.65 G(Ste)481.066 527.4 Q -.15(ve)
-.25 G 2.944(ns 1990;).15 F 3.277(1992] pro)324 539.4 R 3.277(vides e)-.15 F
3.277(xamples of descriptor passing in)-.15 F(both the BSD and System V w)324
551.4 Q(orlds.)-.1 E F6 3(3. Connection)324 575.4 R(Ser)3 E -.12(ve)-.12 G(r)
.12 E F4 -.4(Wi)324 591 S 4.609(th the ability to pass an arbitrary descriptor)
.4 F .589(between unrelated processes the idea of a)324 603 R F7(connection)
3.088 E(server)324 615 Q F4 .306(came about [Presotto and Ritchie 1985; 1990].)
2.805 F(This serv)324 627 Q(er operates as follo)-.15 E(ws:)-.25 E 7.78<8341>
324 642.6 S 2.829 -.15(ny p)342.5 642.6 T 2.529
(rocess creates a connection to the serv).15 F(er)-.15 E(,)-.4 E 1.175
(called a)335.28 654.6 R F7(str)3.675 E 1.175(eam pipe)-.37 F F4 6.175(.4)C
1.175(.3BSD implements stream)432.37 654.6 R .214
(pipes using Unix domain stream sock)335.28 666.6 R .214(ets, while the)-.1 F
F5(pipe)335.28 678.6 Q F4(system call is used under SVR4.)2.5 E 7.78<8354>324
694.2 S 1.628(he serv)341.39 694.2 R 1.628(er recei)-.15 F -.15(ve)-.25 G 4.128
(sn).15 G 1.629(oti\214cation that a ne)424.854 694.2 R 4.129(wc)-.25 G(lient)
522.22 694.2 Q .313(has connected to it and a unique connection is cre-)335.28
706.2 R 1.29(ated for each client.)335.28 718.2 R 1.29(The BSD)6.29 F F5
(accept)3.79 E F4(function)3.79 E EP
%%Page: 2 2
%%BeginPageSetup
BP
%%EndPageSetup
509.64 118 MT 0 -36 RL -144 0 RL 0 36 RL CL .32 LW ST/F0 8/Times-Roman@0 SF
(process client request for:)396.428 96.76 Q/F1 8/Courier@0 SF
(tcp/foo.com/smtp)399.24 106.76 Q F0(portal daemon)414.644 78.76 Q 315.24 118
MT 0 -36 RL -201.6 0 RL 0 36 RL CL ST F1
(fd = open\("/p/tcp/foo.com/smtp", O_RDWR\);)116.04 96.76 Q F0(client \(nai)
174.608 78.76 Q .24 -.12(ve a)-.2 H(pplication\)).12 E 214.44 139.6 214.44 100
DL 214.44 139.6 MT -1.8 -7.2 RL 3.6 0 RL CL BL 214.44 139.6 MT -1.8 -7.2 RL 3.6
0 RL CL ST 389.616 139.6 389.616 110.8 DL 389.616 110.8 MT 1.8 7.2 RL -3.6 0 RL
CL BL 389.616 110.8 MT 1.8 7.2 RL -3.6 0 RL CL ST 389.616 139.6 214.44 139.6 DL
389.616 139.6 MT -7.2 1.8 RL 0 -3.6 RL CL BL 389.616 139.6 MT -7.2 1.8 RL 0
-3.6 RL CL ST 122.28 146.8 122.28 100 DL 122.28 100 MT 1.8 7.2 RL -3.6 0 RL CL
BL 122.28 100 MT 1.8 7.2 RL -3.6 0 RL CL ST 485.664 146.8 485.664 110.8 DL
485.664 146.8 MT -1.8 -7.2 RL 3.6 0 RL CL BL 485.664 146.8 MT -1.8 -7.2 RL 3.6
0 RL CL ST 485.664 146.8 122.28 146.8 DL 122.28 146.8 MT 7.2 -1.8 RL 0 3.6 RL
CL BL 122.28 146.8 MT 7.2 -1.8 RL 0 3.6 RL CL ST 102.84 126.64 99.24 126.64 DL
109.968 126.64 106.368 126.64 DL 117.096 126.64 113.496 126.64 DL 124.224
126.64 120.624 126.64 DL 131.424 126.64 127.824 126.64 DL 138.552 126.64
134.952 126.64 DL 145.68 126.64 142.08 126.64 DL 152.808 126.64 149.208 126.64
DL 159.936 126.64 156.336 126.64 DL 167.064 126.64 163.464 126.64 DL 174.264
126.64 170.664 126.64 DL 181.392 126.64 177.792 126.64 DL 188.52 126.64 184.92
126.64 DL 195.648 126.64 192.048 126.64 DL 202.776 126.64 199.176 126.64 DL
209.904 126.64 206.304 126.64 DL 217.032 126.64 213.432 126.64 DL 224.232
126.64 220.632 126.64 DL 231.36 126.64 227.76 126.64 DL 238.488 126.64 234.888
126.64 DL 245.616 126.64 242.016 126.64 DL 252.744 126.64 249.144 126.64 DL
259.872 126.64 256.272 126.64 DL 267.072 126.64 263.472 126.64 DL 274.2 126.64
270.6 126.64 DL 281.328 126.64 277.728 126.64 DL 288.456 126.64 284.856 126.64
DL 295.584 126.64 291.984 126.64 DL 302.712 126.64 299.112 126.64 DL 309.84
126.64 306.24 126.64 DL 317.04 126.64 313.44 126.64 DL 324.168 126.64 320.568
126.64 DL 331.296 126.64 327.696 126.64 DL 338.424 126.64 334.824 126.64 DL
345.552 126.64 341.952 126.64 DL 352.68 126.64 349.08 126.64 DL 359.808 126.64
356.208 126.64 DL 367.008 126.64 363.408 126.64 DL 374.136 126.64 370.536
126.64 DL 381.264 126.64 377.664 126.64 DL 388.392 126.64 384.792 126.64 DL
395.52 126.64 391.92 126.64 DL 402.648 126.64 399.048 126.64 DL 409.848 126.64
406.248 126.64 DL 416.976 126.64 413.376 126.64 DL 424.104 126.64 420.504
126.64 DL 431.232 126.64 427.632 126.64 DL 438.36 126.64 434.76 126.64 DL
445.488 126.64 441.888 126.64 DL 452.616 126.64 449.016 126.64 DL 459.816
126.64 456.216 126.64 DL 466.944 126.64 463.344 126.64 DL 474.072 126.64
470.472 126.64 DL 481.2 126.64 477.6 126.64 DL 488.328 126.64 484.728 126.64 DL
495.456 126.64 491.856 126.64 DL 502.656 126.64 499.056 126.64 DL 509.784
126.64 506.184 126.64 DL 516.912 126.64 513.312 126.64 DL 524.04 126.64 520.44
126.64 DL(user)333.776 123.4 Q -.08(ke)330.484 133.4 S(rnel).08 E/F2 9
/Times-Roman@0 SF(Figure 1:)246.214 171.8 Q(Ov)6.75 E(erall design of portals.)
-.135 E/F3 10/Times-Roman@0 SF .917
(creates the unique connections, as does the SVR4)83.28 197 R/F4 10/Courier@0
SF(connld)83.28 209 Q F3(streams module.)2.5 E 7.78<8354>72 224.6 S 1.331
(he client sends a request to the serv)89.39 224.6 R(er)-.15 E 3.831(,o)-.4 G
1.332(ften by)258.618 224.6 R .02
(writing some data to the stream pipe that the serv)83.28 236.6 R(er)-.15 E
(reads.)83.28 248.6 Q 7.78<8354>72 264.2 S .281(he serv)89.39 264.2 R .281
(er v)-.15 F .282(alidates the request and does whate)-.25 F -.15(ve)-.25 G(r)
.15 E .585(is required.)83.28 276.2 R .584(This might in)5.585 F -.2(vo)-.4 G
(lv).2 E 3.084(ee)-.15 G .584(stablishing a net-)218.502 276.2 R -.1(wo)83.28
288.2 S .641(rk connection to a remote system, or opening a).1 F 2.143
(modem de)83.28 300.2 R 2.143(vice and dialing a remote system, for)-.25 F -.15
(ex)83.28 312.2 S 3.342(ample. The).15 F .843(purpose of the connection serv)
3.343 F .843(er is)-.15 F .27(to place all these communications-dependent oper)
83.28 324.2 R(-)-.2 E 1.881(ations into a central user)83.28 336.2 R 1.882
(-mode serv)-.2 F 1.882(er instead of)-.15 F 1.672
(scattering the same operations through numerous)83.28 348.2 R .071
(applications, or instead of trying to place them into)83.28 360.2 R(the k)
83.28 372.2 Q(ernel.)-.1 E 7.78<8354>72 387.8 S 3.44(he serv)89.39 387.8 R 3.44
(er uses descriptor passing to return a)-.15 F .927(descriptor to the client.)
83.28 399.8 R .928(The client can)5.927 F F4(read)3.428 E F3(and)3.428 E F4
(write)83.28 411.8 Q F3 1.184(this descriptor)3.684 F 3.683(,w)-.4 G 1.183
(ithout in)188.091 411.8 R -.2(vo)-.4 G 1.183(lving itself in).2 F
(all the steps required to open the descriptor)83.28 423.8 Q(.)-.55 E([Ste)72
441.8 Q -.15(ve)-.25 G 2.748(ns 1992] pro).15 F 2.749(vides a complete e)-.15 F
2.749(xample of a)-.15 F 2.788(connection serv)72 453.8 R 2.787
(er that dials a modem, along with)-.15 F .964
(some general purpose client\211serv)72 465.8 R .964(er connection func-)-.15 F
1.064(tions that hide the dif)72 477.8 R 1.064(ferences between the BSD and)
-.25 F 3.77(SVR4 implementations.)72 489.8 R(The)8.77 E F4(ipc)6.27 E F3 3.77
(\(3X\) man page)B([A)72 501.8 Q .662
(T&T 1990] documents another set of client\211serv)-1.11 F(er)-.15 E .773
(connection functions, the ones described in [Presotto)72 513.8 R 1.163
(and Ritchie 1990].)72 525.8 R 1.162(As po)6.162 F 1.162
(werful as the concept of a)-.25 F .316(connection serv)72 537.8 R .317
(er is, it has been used sparingly in the)-.15 F(widely used releases of Unix.)
72 549.8 Q .475(One problem with the connection serv)97 565.4 R .475(er model)
-.15 F .946(is that it cannot be used by)72 577.4 R/F5 10/Times-Italic@0 SF
(naive)3.447 E F3 3.447(applications. That)3.447 F 3.763
(is, applications that only call)72 589.4 R F4(open)6.263 E F3(,)A F4(read)
6.263 E F3 6.262(,a)C(nd)278 589.4 Q F4(write)72 601.4 Q F3 5.086(.T)C 2.586
(ot)114.896 601.4 S(ak)125.262 601.4 Q 2.586(ea)-.1 G(dv)146.068 601.4 Q .086
(antage of a connection serv)-.25 F .087(er the)-.15 F 1.691
(application must be coded to connect to the serv)72 613.4 R(er)-.15 E(,)-.4 E
3.041(send a request, and recei)72 625.4 R 3.341 -.15(ve a d)-.25 H 3.042
(escriptor in reply).15 F(.)-.65 E 1.32(Connection serv)72 637.4 R 1.32
(ers cannot be used by scripting lan-)-.15 F(guages such as A)72 649.4 Q
(wk, Tcl, and shell scripts.)-.92 E/F6 12/Times-Bold@0 SF 3(4. P)72 678.2 R
(ortals)-.24 E F3 .323(Portals pro)72 693.8 R .323(vide a generalized `)-.15 F
(`open')-.74 E 2.824('c)-.74 G(apability)230.546 693.8 Q 2.824(,s)-.65 G(im-)
274.11 693.8 Q .17(ilar to a connection serv)72 705.8 R(er)-.15 E 2.67(,b)-.4 G
.17(ut the)185.96 705.8 R 2.67(ys)-.15 G(olv)220.04 705.8 Q 2.67(et)-.15 G .17
(he problem)242.56 705.8 R 2.627(of nai)72 717.8 R 2.927 -.15(ve a)-.25 H 5.127
(pplications. Portals).15 F 2.627(are accessed by the)5.127 F(normal)324 197 Q
F4(open)3.762 E F3 3.762(function. Since)3.762 F 1.261(most applications \(be)
3.762 F .331(it a scripting language or a binary application that we)324 209 R
-.1(wa)324 221 S(nt to run b).1 E(ut do not ha)-.2 E .3 -.15(ve t)-.2 H
(he source code for\) allo).15 E(w)-.25 E .931
(us to enter a pathname of our choice, and since por)324 233 R(-)-.2 E 2.147
(tals are accessed by pathnames, this mak)324 245 R 2.147(es portals)-.1 F -.2
(av)324 257 S(ailable to virtually)-.05 E F5(any)2.5 E F3(application.)2.5 E
-.15(Fo)349 272.6 S 5.176(re).15 G 2.676(xample a nai)372.206 272.6 R 2.977
-.15(ve a)-.25 H 2.677(pplication calls).15 F F4(open)5.177 E F3(with)324 284.6
Q F4(/p/tcp/foo.com/smtp)6.198 E F3 3.697(as the pathname)6.198 F(ar)324 296.6
Q .871(gument and the k)-.18 F .872(ernel returns either a nonne)-.1 F -.05(ga)
-.15 G(ti).05 E -.15(ve)-.25 G 1.39(descriptor or)324 308.6 R/F7 10/Symbol SF
(-)3.89 E F3 3.89(1i)C 3.89(fa)397.26 308.6 S 3.89(ne)408.92 308.6 S 1.39
(rror occurs.)422.25 308.6 R 1.39(The application)6.39 F(then)324 320.6 Q F4
(read)4.97 E F3 4.97(sa)C(nd)383.49 320.6 Q F4(write)4.97 E F3 4.97(st)C 2.47
(he descriptor)440.1 320.6 R 7.47(.F)-.55 G 2.47(igure 1)509.48 320.6 R(sho)324
332.6 Q(ws the basic design.)-.25 E 1.41(The pathname ar)349 348.2 R 1.41
(gument to)-.18 F F4(open)3.91 E F3(be)3.91 E 1.41(gins with)-.15 F(the)324
360.2 Q F5 1.123(mount point)3.623 F F3 1.123(of a portal \214lesystem \()3.623
F F4(/p)A F3 1.123(in all the)3.623 F -.15(ex)324 372.2 S .297
(amples in this paper\).).15 F .297(The k)5.297 F .296
(ernel passes this to the)-.1 F 1.737
(portal daemon, as we describe in detail in the ne)324 384.2 R(xt)-.15 E 4.139
(section. The)324 396.2 R 1.639(daemon does whate)4.139 F -.15(ve)-.25 G 4.139
(ri).15 G 4.139(tn)482.595 396.2 S 1.638(eeds to for)494.514 396.2 R 1.074
(this client, which in this case in)324 408.2 R -.2(vo)-.4 G(lv).2 E 1.074
(es calling)-.15 F F4(get-)3.574 E(hostbyname)324 420.2 Q F3 2.057(to con)4.557
F -.15(ve)-.4 G 2.057(rt the name).15 F F4(foo.com)4.556 E F3(into)4.556 E .458
(one or more IP addresses, calling)324 432.2 R F4(getservbyname)2.959 E F3 .597
(to obtain the port number for the)324 444.2 R F4(smtp)3.096 E F3 .596
(service, call-)3.096 F(ing)324 456.2 Q F4(socket)3.725 E F3 3.725(,a)C 1.226
(nd then calling)387.17 456.2 R F4(connect)3.726 E F3 6.226(.T)C 1.226(he dae-)
509.624 456.2 R 1.104(mon either succeeds and passes a descriptor back to)324
468.2 R .236(the client, or the client')324 480.2 R 2.736(sc)-.55 G .236
(all to)428.5 480.2 R F4(open)2.736 E F3(returns)2.736 E F7(-)2.736 E F3 2.736
(1w)C(ith)529.44 480.2 Q F4(errno)324 492.2 Q F3
(set to the appropriate error code.)2.5 E .888(There are a fe)349 507.8 R 3.388
(wk)-.25 G 1.187 -.15(ey p)422.162 507.8 T .887(oints in the implementa-).15 F
(tion of portals in 4.4BSD.)324 519.8 Q 5.28(1. The)324 535.4 R 1.69
(only function of the portal code within the)4.19 F -.1(ke)339.28 547.4 S 2.647
(rnel is to pass the pathname ar).1 F 2.647(gument from)-.18 F F4(open)339.28
559.4 Q F3 4.216(to the portal daemon, along with the)6.715 F(client')339.28
571.4 Q 6.114(sc)-.55 G 3.613(redentials, and to tak)378.724 571.4 R 6.113(et)
-.1 G 3.613(he daemon')486.117 571.4 R(s)-.55 E .893(return v)339.28 583.4 R
.894(alue, either a descriptor or an error code,)-.25 F 1.149
(and pass it back as the return v)339.28 595.4 R 1.149(alue from)-.25 F F4
(open)3.648 E F3(.)A .824(The k)339.28 607.4 R .824
(ernel does not interpret the pathname ar)-.1 F(gu-)-.18 E .266
(ment at all, other than detecting the portal \214lesys-)339.28 619.4 R .62
(tem mount point.)339.28 631.4 R .62(The interpretation of the string)5.62 F F4
(tcp)339.28 643.4 Q F3 2.792(,f)C(ollo)365.902 643.4 Q .291
(wed by a host name, follo)-.25 F .291(wed by a ser)-.25 F(-)-.2 E
(vice name, is handled by the daemon.)339.28 655.4 Q 5.28(2. The)324 671 R .549
(portal daemon is a user process that can eas-)3.048 F 2.475
(ily be enhanced or replaced.)339.28 683 R 2.474(As e)7.474 F 2.474
(xperience is)-.15 F 1.702(obtained with portals, additional objects besides)
339.28 695 R .865(TCP connections can be added without changing)339.28 707 R
(the k)339.28 719 Q(ernel.)-.1 E EP
%%Page: 3 3
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 5.28(3. The)72 84 R .547
(use of portals and the portal daemon is com-)3.046 F .42
(pletely transparent to the application.)87.28 96 R .42(As a tri)5.42 F(vial)
-.25 E -.15(ex)87.28 108 S(ample,).15 E/F1 9/Courier@0 SF($)94.48 125 Q/F2 9
/Courier-Bold@0 SF(cat < /p/tcp/noao.edu/daytime)5.4 E F1(Wed Jul)94.48 136 Q
5.4(61)143.08 136 S(1:26:07 1994)159.28 136 Q F0 1.019
(opens a TCP connection to the standard daytime)87.28 154 R(serv)87.28 166 Q
.256(er on the host)-.15 F/F3 10/Courier@0 SF(noao.edu)2.756 E F0 2.756(,w)C
.255(hich writes back)221.95 166 R 1.069
(the current time and date and closes the connec-)87.28 178 R(tion.)87.28 190 Q
5.28(4. Since)72 205.6 R 1.335(the client')3.835 F(s)-.55 E F3(open)3.834 E F0
1.334(goes through the k)3.834 F(ernel)-.1 E .407
(before the request is passed to the portal daemon,)87.28 217.6 R 1.056(the k)
87.28 229.6 R 1.056(ernel pro)-.1 F 1.056(vides the client')-.15 F 3.556(sc)
-.55 G 1.055(redentials to the)222.01 229.6 R(serv)87.28 241.6 Q 3.196
(er: the client')-.15 F 5.697(se)-.55 G -.25(ff)176.979 241.6 S(ecti).25 E
3.497 -.15(ve u)-.25 H 3.197(ser ID, ef).15 F(fecti)-.25 E -.15(ve)-.25 G 2.578
(group ID, and supplementary group IDs.)87.28 253.6 R(This)7.578 E 1.136
(information is passed to the daemon, in addition)87.28 265.6 R .654
(to the pathname from)87.28 277.6 R F3(open)3.154 E F0 5.654(.T)C .653
(his lets the serv)216.48 277.6 R(er)-.15 E 1.437(implement an)87.28 289.6 R
3.937(yt)-.15 G 1.437(ype of access restrictions that it)155.004 289.6 R
(desires, based on the client')87.28 301.6 Q 2.5(si)-.55 G(dentity)206.71 301.6
Q(.)-.65 E/F4 12/Times-Bold@0 SF 3(5. Related)72 332.8 R -.9(Wo)3 G(rk).9 E F0
1.826(Ideas similar to portals ha)72 348.4 R 2.126 -.15(ve a)-.2 H 1.825
(ppeared in numerous).15 F .662(operating systems o)72 360.4 R -.15(ve)-.15 G
3.163(rt).15 G .663(he past decade.)171.178 360.4 R 2.263 -.8(We m)5.663 H
(ention).8 E 3.184(these brie\215y here since space pre)72 372.4 R -.15(ve)-.25
G 3.184(nts a detailed).15 F(comparison of the v)72 384.4 Q
(arious implementations.)-.25 E 1.39(The 4.2BSD manual [Jo)97 400 R 3.89(ye)-.1
G 3.89(ta)211.06 400 S 1.39(l. 1983] de\214ned)222.17 400 R(the)72 412 Q F3
(portal)2.507 E F0 .006(system call, with se)2.507 F -.15(ve)-.25 G 2.506(na)
.15 G -.18(rg)224.568 412 S .006(uments, and a).18 F(footnote that it w)72 424
Q(as not implemented in 4.2BSD.)-.1 E 8.755([Bershad and Pink)97 439.6 R 8.755
(erton 1988] describe)-.1 F/F5 10/Times-Italic@0 SF(watc)72 451.6 Q(hdo)-.15 E
(gs)-.1 E F0 5.224(:u)C(ser)127.534 451.6 Q(-le)-.2 E -.15(ve)-.25 G 5.224(lp)
.15 G 2.723(rocesses that can be called)171.588 451.6 R(whene)72 463.6 Q -.15
(ve)-.25 G 2.5(ras).15 G(peci\214ed \214le or directory is opened.)123.8 463.6
Q 2.178(The Sprite operating system pro)97 479.2 R 2.178(vides pseudo)-.15 F
(de)72 491.2 Q 2.359(vices [W)-.25 F 2.359(elch and Ousterhout 1988].)-.8 F
2.358(It allo)7.358 F 2.358(ws a)-.25 F(user)72 503.2 Q(-le)-.2 E -.15(ve)-.25
G 2.5(lp).15 G(rocess to emulate a \214le or de)118.33 503.2 Q(vice.)-.25 E
1.255(Plan 9 [Presotto and W)97 518.8 R 1.255(interbottom 1993] rep-)-.4 F 1.68
(resents netw)72 530.8 R 1.68(ork connections using)-.1 F F5(pr)4.18 E 1.68
(otocol de)-.45 F(vices)-.15 E F0(.)A 1.015(All protocol de)72 542.8 R 1.016
(vices look identical so user programs)-.25 F(contain no netw)72 554.8 Q
(ork-speci\214c code.)-.1 E F4 3(6. Implementation)72 582.4 R(of P)3 E(ortals)
-.24 E F0 2.762(Portals are implemented as a ne)72 598 R 5.261<778c>-.25 G
2.761(lesystem type)230.519 598 R 1.492(within the 4.4BSD k)72 610 R 3.992
(ernel. When)-.1 F 1.493(the system is ini-)3.993 F 2.806
(tialized a portal daemon is normally started.)72 622 R(The)7.805 E
(daemon performs the follo)72 634 Q(wing steps:)-.25 E 5.28(1. Creates)72 649.6
R 3.654(aU)3.654 G 1.154(nix domain stream sock)136.238 649.6 R 1.155
(et, which we)-.1 F(call)87.28 661.6 Q F3(listenfd)2.5 E F0(.)A 5.28(2. Calls)
72 677.2 R F3(listen)6.55 E F0 4.05(to allo)6.55 F 6.55(wi)-.25 G 4.05
(ncoming connection)202.57 677.2 R(requests to be accepted on the sock)87.28
689.2 Q(et.)-.1 E 5.28(3. Calls)72 704.8 R(the)5.102 E F3(mount)5.103 E F0
2.603(function to mount the portal)5.103 F .381
(\214lesystem at a speci\214ed location in the \214lesystem)87.28 716.8 R 1.163
(\(the mount point\), typically)339.28 84 R F3(/p)3.663 E F0 6.164(.A)C 1.164
(dditional por)484.316 84 R(-)-.2 E .804(tal-speci\214c ar)339.28 96 R .804
(guments to the)-.18 F F3(mount)3.303 E F0 .803(function are)3.303 F 1.367
(the sock)339.28 108 R 1.367(et descriptor of the listening sock)-.1 F 1.368
(et cre-)-.1 F(ated by the serv)339.28 120 Q(er)-.15 E 2.5(,a)-.4 G
(nd the serv)418.98 120 Q(er')-.15 E 2.5(sp)-.55 G(rocess ID.)484.65 120 Q 5.28
(4. The)324 135.6 R 3.635(portal daemon then goes to sleep in an)6.135 F F3
(accept)339.28 147.6 Q F0 2.241(function, w)4.741 F 2.242
(aiting for some process to)-.1 F 3.739(open a pathname that be)339.28 159.6 R
3.738(gins with the portal)-.15 F(mount point.)339.28 171.6 Q
(These four steps are summarized in Figure 2.)324 187.2 Q 540 287.2 MT 0 -72 RL
-216 0 RL 0 72 RL CL .32 LW ST/F6 8/Courier@0 SF
(listenfd = socket\(PF_UNIX, SOCK_STREAM, 0\);)326.4 232.96 Q
(listen\(listenfd, 5\):)326.4 242.96 Q
(mount\(MOUNT_PORTAL, "/p", listenfd, ... \);)326.4 252.96 Q
(accept\(listenfd, ... \);)326.4 262.96 Q/F7 8/Times-Roman@0 SF(portal daemon)
409.004 211.96 Q 504 316 504 287.2 DL 522 344.8 MT 0 -28.8 RL -36 0 RL 0 28.8
RL CL ST(Unix)496 327.16 Q(sock)493.82 337.16 Q(et)-.08 E F6(listenfd)506
312.76 Q 327.6 301.6 324 301.6 DL 334.656 301.6 331.056 301.6 DL 341.784 301.6
338.184 301.6 DL 348.84 301.6 345.24 301.6 DL 355.896 301.6 352.296 301.6 DL
363.024 301.6 359.424 301.6 DL 370.08 301.6 366.48 301.6 DL 377.136 301.6
373.536 301.6 DL 384.264 301.6 380.664 301.6 DL 391.32 301.6 387.72 301.6 DL
398.376 301.6 394.776 301.6 DL 405.504 301.6 401.904 301.6 DL 412.56 301.6
408.96 301.6 DL 419.616 301.6 416.016 301.6 DL 426.744 301.6 423.144 301.6 DL
433.8 301.6 430.2 301.6 DL 440.856 301.6 437.256 301.6 DL 447.984 301.6 444.384
301.6 DL 455.04 301.6 451.44 301.6 DL 462.096 301.6 458.496 301.6 DL 469.224
301.6 465.624 301.6 DL 476.28 301.6 472.68 301.6 DL 483.336 301.6 479.736 301.6
DL 490.464 301.6 486.864 301.6 DL 497.52 301.6 493.92 301.6 DL 504.576 301.6
500.976 301.6 DL 511.704 301.6 508.104 301.6 DL 518.76 301.6 515.16 301.6 DL
525.816 301.6 522.216 301.6 DL 532.944 301.6 529.344 301.6 DL 540 301.6 536.4
301.6 DL F7(user)324 298.36 Q -.08(ke)324 308.36 S(rnel).08 E/F8 9
/Times-Roman@0 SF(Figure 2:)356.256 367.4 Q(Initialization of portal daemon.)
6.75 E F0 -.4(Wi)349 391.4 S .098
(thin the vnode architecture of 4.4BSD \(simi-).4 F 3.083
(lar to the vnode architecture described in [W)324 403.4 R(elch)-.8 E 1.813
(1994]\), the portal \214lesystem pro)324 415.4 R 1.814(vides 11 \214lesystem)
-.15 F(\(or)324 427.4 Q F5(vfs)4.629 E F0 4.629(\)o)C 2.128
(perations: mount, unmount, statfs, and so)364.358 427.4 R 5.546(on. About)324
439.4 R 3.046(40 \214le \(or)5.546 F F5(vnode)5.546 E F0 5.546(\)o)C 3.047
(perations are also)463.926 439.4 R .464
(de\214ned for each \214lesystem type: open, close, lookup,)324 451.4 R
(and so on.)324 463.4 Q(Whene)349 479 Q -.15(ve)-.25 G -5.961 3.462(ra p).15 H
.963(rocess \(which we call the client\))406.055 479 R 1.188
(opens a pathname that be)324 491 R 1.187(gins with the portal mount)-.15 F
1.216(point, the k)324 503 R 1.216(ernel passes control to the vnode lookup)-.1
F 3.947(function de\214ned for the portal \214lesystem:)324 515 R F3(por-)6.446
E(tal_lookup)324 527 Q F0 5(.T)C(he follo)397.61 527 Q(wing steps tak)-.25 E
2.5(ep)-.1 G(lace.)497.25 527 Q(1.)324 542.6 Q F3(portal_lookup)7.78 E F0 .322
(allocates a ne)2.822 F(w)-.25 E F3(vnode)2.822 E F0(struc-)2.822 E .209
(ture and the remainder of the pathname \(whate)339.28 554.6 R -.15(ve)-.25 G
(r).15 E(follo)339.28 566.6 Q .34(ws the mount point\) is sa)-.25 F -.15(ve)-.2
G 2.84(di).15 G 2.84(nt)479.61 566.6 S .34(he structure.)490.23 566.6 R -.15
(Fo)339.28 578.6 S 5.112(re).15 G 2.611
(xample, if a process opens the pathname)362.422 578.6 R F3
(/p/tcp/foo.com/smtp)339.28 590.6 Q F0 24.61(,t)C 22.11(he string)483.17 590.6
R F3(tcp/foo.com/smtp)339.28 602.6 Q F0 2.626(is sa)5.126 F -.15(ve)-.2 G 5.126
(di).15 G 5.126(nt)482.528 602.6 S(he)495.434 602.6 Q F3(vnode)5.126 E F0
(structure.)339.28 614.6 Q 5.28(2. This)324 630.2 R(ne)368.41 630.2 Q 11.35(wv)
-.25 G 8.85(node is returned by)401.17 630.2 R F3(por-)516 630.2 Q(tal_lookup)
339.28 642.2 Q F0 2.653(and it becomes an ar)5.154 F 2.653(gument to)-.18 F F3
(portal_open)339.28 654.2 Q F0 4.305(,w)C 1.805(hich is the ne)419.305 654.2 R
1.805(xt k)-.15 F 1.805(ernel func-)-.1 F(tion called to process the)339.28
666.2 Q F3(open)2.5 E F0(function.)2.5 E(3.)324 681.8 Q F3(portal_open)7.78 E
F0 2.63(creates tw)5.13 F 5.13(on)-.1 G 3.13 -.25(ew U)468.33 681.8 T 2.63
(nix domain).25 F 1.112(stream sock)339.28 693.8 R 1.112
(ets: the \214rst we call)-.1 F F3(clifd)3.613 E F0 3.613(,a)C 1.113(nd the)
514.167 693.8 R 2.308(second we call)339.28 705.8 R F3(connfd)4.807 E F0 7.307
(.T)C 2.307(he second of these)459.489 705.8 R(sock)339.28 717.8 Q 4.803
(ets is created and returned as the ne)-.1 F(w)-.25 E EP
%%Page: 4 4
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 1.035(descriptor by the)87.28 84 R/F1 10/Courier@0 SF
(accept)3.534 E F0 1.034(pending on the portal)3.534 F(daemon')87.28 96 Q 3.488
(sl)-.55 G .988(istening Unix sock)131.878 96 R 3.488(et. The)-.1 F .989
(\214rst sock)3.489 F(et)-.1 E(\()87.28 108 Q F1(clifd)A F0 5.744(\)i)C 5.744
(sc)132.464 108 S 3.243(onnected to)146.538 108 R F1(connfd)5.743 E F0 5.743
(,a)C 5.743(st)250.587 108 S(hough)263 108 Q 3.922
(both had been created by the)87.28 120 R F1(socketpair)6.422 E F0 2.93
(function. This)87.28 132 R .43(creates a full-duple)2.93 F 2.93(xp)-.15 G .43
(ipe between)239.53 132 R F1(clifd)87.28 144 Q F0(and)5.574 E F1(connfd)5.574 E
F0 8.074(.A)C(dditionally)196.662 144 Q 5.574(,s)-.65 G 3.074(ince this)251.316
144 R -.74(``)87.28 156 S(pipe').74 E 3.549('i)-.74 G 3.549(saU)122.669 156 S
1.049(nix domain sock)145.317 156 R 1.048(et, descriptors can)-.1 F
(be passed across it.)87.28 168 Q 2.401(Figure 3 sho)87.28 186 R 2.401
(ws the current state of the serv)-.25 F(er)-.15 E(.)-.55 E
(The client is block)87.28 198 Q(ed in its call to)-.1 E F1(open)2.5 E F0(.)A
270 265.6 MT 0 -36 RL -180 0 RL 0 36 RL CL .32 LW ST/F2 8/Courier@0 SF
(connfd = accept\(listenfd, ... \);)103.2 244.36 Q/F3 8/Times-Roman@0 SF
(portal daemon)157.004 226.36 Q 239.976 294.4 239.976 265.6 DL 257.976 323.2 MT
0 -28.8 RL -36 0 RL 0 28.8 RL CL ST(Unix)231.976 305.56 Q(sock)229.796 315.56 Q
(et)-.08 E F2(listenfd)241.976 291.16 Q 180 294.4 180 265.6 DL 198 323.2 MT 0
-28.8 RL -36 0 RL 0 28.8 RL CL ST F3(Unix)172 305.56 Q(sock)169.82 315.56 Q(et)
-.08 E F2(connfd)182 291.16 Q 198 373.6 MT 0 -28.8 RL -36 0 RL 0 28.8 RL CL ST
F3(Unix)172 355.96 Q(sock)169.82 365.96 Q(et)-.08 E F2(clifd)182 380.36 Q 180
395.2 180 373.6 DL 180 323.2 180 344.8 DL 180 344.8 MT -1.8 -7.2 RL 3.6 0 RL CL
BL 180 344.8 MT -1.8 -7.2 RL 3.6 0 RL CL ST 180 323.2 MT 1.8 7.2 RL -3.6 0 RL
CL BL 180 323.2 MT 1.8 7.2 RL -3.6 0 RL CL ST 79.2 280 75.6 280 DL 86.256 280
82.656 280 DL 93.384 280 89.784 280 DL 100.44 280 96.84 280 DL 107.496 280
103.896 280 DL 114.552 280 110.952 280 DL 121.68 280 118.08 280 DL 128.736 280
125.136 280 DL 135.792 280 132.192 280 DL 142.848 280 139.248 280 DL 149.976
280 146.376 280 DL 157.032 280 153.432 280 DL 164.088 280 160.488 280 DL
171.216 280 167.616 280 DL 178.272 280 174.672 280 DL 185.328 280 181.728 280
DL 192.384 280 188.784 280 DL 199.512 280 195.912 280 DL 206.568 280 202.968
280 DL 213.624 280 210.024 280 DL 220.752 280 217.152 280 DL 227.808 280
224.208 280 DL 234.864 280 231.264 280 DL 241.92 280 238.32 280 DL 249.048 280
245.448 280 DL 256.104 280 252.504 280 DL 263.16 280 259.56 280 DL 270.216 280
266.616 280 DL 277.344 280 273.744 280 DL 284.4 280 280.8 280 DL F3(user)75.6
276.76 Q -.08(ke)75.6 286.76 S(rnel).08 E/F4 9/Times-Roman@0 SF 1.681
(Figure 3:)72 420.2 R 1.681(Client calls)8.431 F/F5 9/Courier@0 SF(open)3.931 E
F4 3.931(,k)C 1.681(ernel creates tw)193.418 420.2 R 3.93(os)-.09 G(ock)265.095
420.2 Q(ets)-.09 E(and connects them together)129.757 432.2 Q(.)-.495 E F0 5.28
(4. The)72 463.4 R .127(portal daemon calls)2.627 F F1(fork)2.627 E F0 2.628
(,l)C(ik)218.566 463.4 Q 2.628(eat)-.1 G .128(ypical con-)243.162 463.4 R .302
(current serv)87.28 475.4 R(er)-.15 E 2.802(,a)-.4 G .301
(nd the child handles the ne)152.024 475.4 R 2.801(wc)-.25 G(on-)274.67 475.4 Q
3.645(nection request on the descriptor returned by)87.28 487.4 R F1(accept)
87.28 499.4 Q F0 6.019(.T)C 1.019(he child closes)137.909 499.4 R F1(listenfd)
3.518 E F0 3.518(,t)C 1.018(he par)259.142 499.4 R(-)-.2 E .297(ent closes)
87.28 511.4 R F1(connfd)2.797 E F0 2.797(,a)C .297(nd the parent calls)175.271
511.4 R F1(accept)2.798 E F0(ag)87.28 523.4 Q 1.845(ain, w)-.05 F 1.845
(aiting for the ne)-.1 F 1.844(xt client to open a \214le)-.15 F 2.74
(whose pathname be)87.28 535.4 R 2.74(gins with the portal mount)-.15 F(point.)
87.28 547.4 Q .664(From this point on we sho)87.28 565.4 R 3.163(wo)-.25 G .663
(nly the child, since)210.461 565.4 R(it is handling this client')87.28 577.4 Q
2.5(sr)-.55 G(equest.)193.68 577.4 Q(5.)72 593 Q F1(portal_open)7.78 E F0 -.2
(bu)3.691 G 1.192(ilds a message that is written).2 F(to)87.28 605 Q F1(clifd)
4.883 E F0 4.883(,w)C 2.383(hich the child reads on)144.546 605 R F1(connfd)
4.882 E F0(.)A 1.793(The message contains the client')87.28 617 R 4.294(sc)-.55
G 1.794(redentials \(a)237.056 617 R F1(portal_cred)87.28 629 Q F0 4.853
(structure, sho)7.353 F 4.852(wn belo)-.25 F 4.852(w\) fol-)-.25 F(lo)87.28 641
Q .486(wed by the remainder of the pathname that w)-.25 F(as)-.1 E(sa)87.28 653
Q -.15(ve)-.2 G 5.052(di).15 G 5.052(nt)117.532 653 S 2.552(he vnode by)130.364
653 R F1(portal_lookup)5.051 E F0(\(the)5.051 E(string)87.28 665 Q F1
(tcp/foo.com/smtp)5.317 E F0 2.818(in our e)5.317 F(xample\).)-.15 E .844
(The child can v)87.28 677 R .844(alidate the client using this infor)-.25 F(-)
-.2 E(mation.)87.28 689 Q(The structure written by the k)87.28 713 Q(ernel is:)
-.1 E F2(struct portal_cred {)339.28 82 Q 9.6(int pcr_flag;)348.88 92 R
(/* file open mode */)440.08 92 Q(uid_t pcr_uid;)348.88 102 Q(/* effective uid)
440.08 102 Q(*/)9.6 E(short pcr_ngroups; /* # of group IDs */)348.88 112 Q
(gid_t pcr_groups[NGROUPS]; /* gids)348.88 122 Q(*/)526.48 122 Q
(/* effective gid = pcr_groups[0] */)368.08 132 Q(};)339.28 142 Q F0 2.645
(Figure 4 sho)339.28 160 R 2.645(ws the current state of the serv)-.25 F(er)
-.15 E(child.)339.28 172 Q 514.8 239.6 MT 0 -36 RL -165.6 0 RL 0 36 RL CL ST F2
(read\(connfd, ... \);)386.4 218.36 Q F3(portal daemon \(child\))397.34 200.36
Q 432 268.4 432 239.6 DL 432 239.6 MT 1.8 7.2 RL -3.6 0 RL CL BL 432 239.6 MT
1.8 7.2 RL -3.6 0 RL CL ST 450 297.2 MT 0 -28.8 RL -36 0 RL 0 28.8 RL CL ST
(Unix)424 279.56 Q(sock)421.82 289.56 Q(et)-.08 E F2(connfd)434 265.16 Q 450
347.6 MT 0 -28.8 RL -36 0 RL 0 28.8 RL CL ST F3(Unix)424 329.96 Q(sock)421.82
339.96 Q(et)-.08 E F2(clifd)434 354.36 Q 432 369.2 432 347.6 DL 432 347.6 MT
1.8 7.2 RL -3.6 0 RL CL BL 432 347.6 MT 1.8 7.2 RL -3.6 0 RL CL ST 432 297.2
432 318.8 DL 432 297.2 MT 1.8 7.2 RL -3.6 0 RL CL BL 432 297.2 MT 1.8 7.2 RL
-3.6 0 RL CL ST F3(send client credentials)396.452 378.56 Q
(and remainder of pathname)388.124 388.56 Q 338.4 254 334.8 254 DL 345.456 254
341.856 254 DL 352.512 254 348.912 254 DL 359.568 254 355.968 254 DL 366.696
254 363.096 254 DL 373.752 254 370.152 254 DL 380.808 254 377.208 254 DL
387.864 254 384.264 254 DL 394.92 254 391.32 254 DL 401.976 254 398.376 254 DL
409.032 254 405.432 254 DL 416.16 254 412.56 254 DL 423.216 254 419.616 254 DL
430.272 254 426.672 254 DL 437.328 254 433.728 254 DL 444.384 254 440.784 254
DL 451.44 254 447.84 254 DL 458.568 254 454.968 254 DL 465.624 254 462.024 254
DL 472.68 254 469.08 254 DL 479.736 254 476.136 254 DL 486.792 254 483.192 254
DL 493.848 254 490.248 254 DL 500.904 254 497.304 254 DL 508.032 254 504.432
254 DL 515.088 254 511.488 254 DL 522.144 254 518.544 254 DL 529.2 254 525.6
254 DL(user)334.8 250.76 Q -.08(ke)334.8 260.76 S(rnel).08 E F4 .347(Figure 4:)
324 419.4 R -.225(Ke)7.097 G .346
(rnel sends client credentials and remainder of).225 F(pathname to child.)
398.628 431.4 Q F0 5.28(6. The)324 459 R .236(child reads the)2.736 F F1
(portal_cred)2.737 E F0 .237(structure and)2.737 F 1.856
(the remainder of the pathname, and does what-)339.28 471 R -2.15 -.25(ev e)
339.28 483 T 2.782(ri).25 G 2.782(tn)361.652 483 S .282
(eeds to do with the client request.)372.214 483 R(Notice)5.283 E 1.016
(that the client')339.28 495 R 3.516(sr)-.55 G 1.016
(equest is implicitly speci\214ed by)409.268 495 R .579
(the pathname that the client opens.)339.28 507 R .579(All the client)5.579 F
.367(has done is call)339.28 519 R F1(open)2.867 E F0 5.367(.T)C .367
(he client is not a)442.605 519 R -.1(wa)-.15 G .367(re of).1 F(what')339.28
531 Q 3.951(sg)-.55 G 1.451(oing on in the k)374.341 531 R 1.451
(ernel, or that the portal)-.1 F(daemon and its child are in)339.28 543 Q -.2
(vo)-.4 G(lv).2 E(ed.)-.15 E .842(Continuing our e)339.28 561 R .841
(xample, the child creates a TCP)-.15 F(sock)339.28 573 Q 1.306
(et and connects it to the speci\214ed serv)-.1 F 1.307(er on)-.15 F 1.929
(the speci\214ed host.)339.28 585 R 1.928(Assuming this succeeds, we)6.928 F
(ha)339.28 597 Q .3 -.15(ve t)-.2 H(he sock).15 E(ets sho)-.1 E
(wn in Figure 5.)-.25 E 5.28(7. The)324 612.6 R 2.335(child calls)4.835 F F1
(sendmsg)4.834 E F0(on)4.834 E F1(connfd)4.834 E F0 2.334(to pass)4.834 F(tw)
339.28 624.6 Q 3.255(oi)-.1 G .755(tems back to the k)360.215 624.6 R .756
(ernel: a 4-byte error code)-.1 F 7.202(and optionally the descriptor)339.28
636.6 R F1(tcpfd)9.702 E F0(that)9.702 E 1.497
(becomes the descriptor returned to the client by)339.28 648.6 R(its)339.28
660.6 Q F1(open)3.829 E F0 6.329(.T)C 1.329
(he descriptor is returned only if the)391.498 660.6 R(error code is 0.)339.28
672.6 Q 1.217(The child passes the \214le descriptor to the k)339.28 690.6 R
(ernel)-.1 E 7.458(using the descriptor)339.28 702.6 R 7.457
(-passing capabilities of)-.2 F F1(sendmsg)339.28 714.6 Q F0 8.47(.T)C 3.47
(he descriptor is recei)398.36 714.6 R -.15(ve)-.25 G 5.97(db).15 G 5.97(yt)
516.81 714.6 S(he)530.56 714.6 Q EP
%%Page: 5 5
%%BeginPageSetup
BP
%%EndPageSetup
284.4 127.6 MT 0 -36 RL -201.6 0 RL 0 36 RL CL .32 LW ST/F0 8/Courier@0 SF
(tcpfd = socket\(PF_INET, SOCK_STREAM, 0\);)87.6 101.36 Q
(connect\(tcpfd, ... \);)87.6 111.36 Q/F1 8/Times-Roman@0 SF
(portal daemon \(child\))148.94 88.36 Q 250.776 156.4 250.776 127.6 DL 268.776
185.2 MT 0 -28.8 RL -36 0 RL 0 28.8 RL CL ST(Unix)242.776 167.56 Q(sock)240.596
177.56 Q(et)-.08 E F0(connfd)252.776 153.16 Q 268.776 235.6 MT 0 -28.8 RL -36 0
RL 0 28.8 RL CL ST F1(Unix)242.776 217.96 Q(sock)240.596 227.96 Q(et)-.08 E F0
(clifd)252.776 242.36 Q 250.776 257.2 250.776 235.6 DL 250.776 185.2 250.776
206.8 DL 183.6 156.4 183.6 127.6 DL 201.6 185.2 MT 0 -28.8 RL -36 0 RL 0 28.8
RL CL ST F1(TCP)176.264 167.56 Q(sock)173.42 177.56 Q(et)-.08 E F0(tcpfd)185.6
153.16 Q 122.4 170.8 165.6 170.8 DL 122.4 170.8 MT 7.2 -1.8 RL 0 3.6 RL CL BL
122.4 170.8 MT 7.2 -1.8 RL 0 3.6 RL CL ST F1(SMTP serv)76.04 167.56 Q(er)-.12 E
(on)75.4 177.56 Q F0(foo.com)2 E 79.2 142 75.6 142 DL 86.256 142 82.656 142 DL
93.384 142 89.784 142 DL 100.44 142 96.84 142 DL 107.496 142 103.896 142 DL
114.624 142 111.024 142 DL 121.68 142 118.08 142 DL 128.736 142 125.136 142 DL
135.864 142 132.264 142 DL 142.92 142 139.32 142 DL 149.976 142 146.376 142 DL
157.104 142 153.504 142 DL 164.16 142 160.56 142 DL 171.216 142 167.616 142 DL
178.344 142 174.744 142 DL 185.4 142 181.8 142 DL 192.456 142 188.856 142 DL
199.584 142 195.984 142 DL 206.64 142 203.04 142 DL 213.696 142 210.096 142 DL
220.824 142 217.224 142 DL 227.88 142 224.28 142 DL 234.936 142 231.336 142 DL
242.064 142 238.464 142 DL 249.12 142 245.52 142 DL 256.176 142 252.576 142 DL
263.304 142 259.704 142 DL 270.36 142 266.76 142 DL 277.416 142 273.816 142 DL
284.544 142 280.944 142 DL 291.6 142 288 142 DL F1(user)75.6 138.76 Q -.08(ke)
75.6 148.76 S(rnel).08 E/F2 9/Times-Roman@0 SF .374(Figure 5:)72 282.2 R .374
(Child creates TCP sock)7.124 F .374(et and connects to speci-)-.09 F
(\214ed serv)160.321 294.2 Q(er)-.135 E(.)-.495 E/F3 10/Courier@0 SF
(portal_open)87.28 326.6 Q/F4 10/Times-Roman@0 SF .537(code in the k)3.038 F
.537(ernel using the k)-.1 F(er)-.1 E(-)-.2 E 3.576(nel equi)87.28 338.6 R -.25
(va)-.25 G 3.576(lent of).25 F F3(recvmsg)6.077 E F4(on)6.077 E F3(clifd)6.077
E F4 8.577(.T)C(he)278.56 338.6 Q 1.16(child closes)87.28 350.6 R F3(tcpfd)3.66
E F4 3.66(,c)C(loses)179.64 350.6 Q F3(connfd)3.66 E F4 3.66(,a)C 1.16
(nd termi-)249.9 350.6 R(nates.)87.28 362.6 Q 1.321
(If a nonzero error code is returned by the child,)87.28 380.6 R 1.374(that v)
87.28 392.6 R 1.374(alue is returned in the client')-.25 F(s)-.55 E F3(errno)
3.873 E F4(and)3.873 E .125(the client')87.28 404.6 R 2.625(sc)-.55 G .125
(all to)138.08 404.6 R F3(open)2.625 E F4(returns)2.626 E/F5 10/Symbol SF(-)
2.626 E F4 2.626(1. In)B .126(our e)2.626 F(xam-)-.15 E 3.218
(ple the error code could be)87.28 416.6 R F3(ECONNREFUSED)5.718 E F4 6.25
(\(connection refused\),)87.28 428.6 R F3(EHOSTUNREACH)8.75 E F4(\(host)8.75 E
1.065(unreachable\), or)87.28 440.6 R F3(ETIMEDOUT)3.565 E F4 1.065
(\(connection timed)3.565 F 3.1(out\). These)87.28 452.6 R .6(error codes e)3.1
F .6(xtend the ones listed on)-.15 F(the)87.28 464.6 Q F3(open)2.5 E F4
(\(2\) manual page.)A 1.348(Figure 6 sho)87.28 482.6 R 1.347
(ws the status of the v)-.25 F 1.347(arious sock)-.25 F(ets)-.1 E .775
(when the child passes the TCP sock)87.28 494.6 R .776(et to the k)-.1 F(er)-.1
E(-)-.2 E(nel.)87.28 506.6 Q 5.28(8. If)72 522.2 R 4.344(ad)4.344 G 1.845
(escriptor is passed by the child \(the error)112.068 522.2 R .974
(code is 0\), it is con)87.28 534.2 R -.15(ve)-.4 G .973(rted into the lo).15 F
.973(west unused)-.25 F 1.339(descriptor in the client process and becomes the)
87.28 546.2 R 1.289(return v)87.28 558.2 R 1.289(alue from)-.25 F F3(open)3.789
E F4 6.289(.W)C 3.788(ec)204.806 558.2 S 1.288(all this)217.474 558.2 R F3
(tcpfd1)3.788 E F4(.)A 2.78(Its inte)87.28 570.2 R 2.78(ger v)-.15 F 2.78
(alue will probably dif)-.25 F 2.78(fer from the)-.25 F -.25(va)87.28 582.2 S
1.86(lue of).25 F F3(tcpfd)4.36 E F4 1.86(in the child, b)4.36 F 1.86
(ut both of these)-.2 F 3.879(descriptors refer to the same \214le table entry)
87.28 594.2 R 2.675(within the k)87.28 606.2 R 5.175(ernel. This)-.1 F 2.675
(is a basic property of)5.175 F .478(passing descriptors: the descriptor v)
87.28 618.2 R .478(alue probably)-.25 F(dif)87.28 630.2 Q 1.799
(fers between the sender and the recei)-.25 F -.15(ve)-.25 G 2.598 -.4(r, b).15
H(ut).2 E .859(both descriptors refer to the same \214le table entry)87.28
642.2 R 1.88(in the k)87.28 654.2 R 4.38(ernel. Figure)-.1 F 4.38(7s)4.38 G(ho)
194.07 654.2 Q 1.88(ws the status of the)-.25 F .895(TCP sock)87.28 666.2 R
.895(et in the client, after the client')-.1 F 3.396(sc)-.55 G .896(all to)
266.824 666.2 R F3(open)87.28 678.2 Q F4(returns.)2.5 E .092
(The 4.4BSD implementation of portals requires)97 705.8 R 1.421
(about 1,000 lines of C code within the k)72 717.8 R 3.922(ernel. The)-.1 F
536.4 127.6 MT 0 -36 RL -201.6 0 RL 0 36 RL CL ST F0(sendmsg\(connfd, ... \);)
382.8 101.36 Q(close\(tcpfd\);)382.8 111.36 Q(close\(connfd\);)382.8 121.36 Q
F1(portal daemon \(child\))400.94 88.36 Q 502.776 156.4 502.776 127.6 DL
502.776 156.4 MT -1.8 -7.2 RL 3.6 0 RL CL BL 502.776 156.4 MT -1.8 -7.2 RL 3.6
0 RL CL ST 520.776 185.2 MT 0 -28.8 RL -36 0 RL 0 28.8 RL CL ST(Unix)494.776
167.56 Q(sock)492.596 177.56 Q(et)-.08 E F0(connfd)504.776 153.16 Q 520.776
235.6 MT 0 -28.8 RL -36 0 RL 0 28.8 RL CL ST F1(Unix)494.776 217.96 Q(sock)
492.596 227.96 Q(et)-.08 E F0(clifd)504.776 242.36 Q 502.776 257.2 502.776
235.6 DL 502.776 257.2 MT -1.8 -7.2 RL 3.6 0 RL CL BL 502.776 257.2 MT -1.8
-7.2 RL 3.6 0 RL CL ST 502.776 185.2 502.776 206.8 DL 502.776 206.8 MT -1.8
-7.2 RL 3.6 0 RL CL BL 502.776 206.8 MT -1.8 -7.2 RL 3.6 0 RL CL ST
(recvmsg\(clifd, ...\);)454.776 266.56 Q(close\(clifd\);)454.776 276.56 Q 453.6
185.2 MT 0 -28.8 RL -36 0 RL 0 28.8 RL CL ST F1(TCP)428.264 167.56 Q(sock)
425.42 177.56 Q(et)-.08 E F0(tcpfd)437.6 153.16 Q 374.4 170.8 417.6 170.8 DL
374.4 170.8 MT 7.2 -1.8 RL 0 3.6 RL CL BL 374.4 170.8 MT 7.2 -1.8 RL 0 3.6 RL
CL ST F1(SMTP serv)328.04 167.56 Q(er)-.12 E(on)327.4 177.56 Q F0(foo.com)2 E
435.6 156.4 MT 0 -7.2 RL 0 -4.8 5.604 -9.36 16.812 -13.68 RC 11.208 -4.32
21.816 -3.12 31.824 3.6 RC 15.012 10.08 RL ST 499.176 149.2 MT -6.984 -2.52 RL
2.016 -3.024 RL CL BL 499.176 149.2 MT -6.984 -2.52 RL 2.016 -3.024 RL CL ST
331.2 142 327.6 142 DL 338.112 142 334.512 142 DL 345.096 142 341.496 142 DL
352.008 142 348.408 142 DL 358.992 142 355.392 142 DL 365.904 142 362.304 142
DL 372.888 142 369.288 142 DL 379.8 142 376.2 142 DL 386.712 142 383.112 142 DL
393.696 142 390.096 142 DL 400.608 142 397.008 142 DL 407.592 142 403.992 142
DL 414.504 142 410.904 142 DL 421.488 142 417.888 142 DL 428.4 142 424.8 142 DL
F1(user)327.6 138.76 Q -.08(ke)327.6 148.76 S(rnel).08 E 518.4 142 514.8 142 DL
526.824 142 523.224 142 DL 535.176 142 531.576 142 DL 543.6 142 540 142 DL F2
2.127(Figure 6:)324 307.4 R 2.126(Status of descriptors while)8.877 F/F6 9
/Courier@0 SF(tcpfd)4.376 E F2 2.126(is passed)4.376 F(from child to k)379.3
319.4 Q(ernel to client.)-.09 E 540 391.8 MT 0 -36 RL -216 0 RL 0 36 RL CL ST
F0(tcpfd1 = open\("/p/tcp/foo.com/smtp", O_RDWR\);)324 370.56 Q F1(client)
423.112 352.56 Q 432 420.6 432 391.8 DL 450 449.4 MT 0 -28.8 RL -36 0 RL 0 28.8
RL CL ST(TCP)424.664 431.76 Q(sock)421.82 441.76 Q(et)-.08 E F0(tcpfd1)434
417.36 Q 493.2 435 450 435 DL 493.2 435 MT -7.2 1.8 RL 0 -3.6 RL CL BL 493.2
435 MT -7.2 1.8 RL 0 -3.6 RL CL ST F1(SMTP serv)497.24 431.76 Q(er)-.12 E(on)
496.6 441.76 Q F0(foo.com)2 E 327.6 406.2 324 406.2 DL 334.656 406.2 331.056
406.2 DL 341.784 406.2 338.184 406.2 DL 348.84 406.2 345.24 406.2 DL 355.896
406.2 352.296 406.2 DL 363.024 406.2 359.424 406.2 DL 370.08 406.2 366.48 406.2
DL 377.136 406.2 373.536 406.2 DL 384.264 406.2 380.664 406.2 DL 391.32 406.2
387.72 406.2 DL 398.376 406.2 394.776 406.2 DL 405.504 406.2 401.904 406.2 DL
412.56 406.2 408.96 406.2 DL 419.616 406.2 416.016 406.2 DL 426.744 406.2
423.144 406.2 DL 433.8 406.2 430.2 406.2 DL 440.856 406.2 437.256 406.2 DL
447.984 406.2 444.384 406.2 DL 455.04 406.2 451.44 406.2 DL 462.096 406.2
458.496 406.2 DL 469.224 406.2 465.624 406.2 DL 476.28 406.2 472.68 406.2 DL
483.336 406.2 479.736 406.2 DL 490.464 406.2 486.864 406.2 DL 497.52 406.2
493.92 406.2 DL 504.576 406.2 500.976 406.2 DL 511.704 406.2 508.104 406.2 DL
518.76 406.2 515.16 406.2 DL 525.816 406.2 522.216 406.2 DL 532.944 406.2
529.344 406.2 DL 540 406.2 536.4 406.2 DL F1(user)324 402.96 Q -.08(ke)324
412.96 S(rnel).08 E F2(Figure 7:)357.372 474.4 Q
(Final status of TCP descriptor)6.75 E(.)-.495 E F4 3.323
(portal daemon is another 1,200 lines of C code.)324 514 R 3.135
(Additional objects added to the portal namespace)324 526 R .395
(increase the size of only the portal daemon.)324 538 R .394(The size)5.394 F
(of the k)324 550 Q(ernel routines does not change.)-.1 E/F7 12/Times-Bold@0 SF
3(7. Examples)324 576.4 R 3(7.1. TCP)324 604 R(Namespace: Clients)3 E F4 2.53
(The 4.4BSD implementation of the portal daemon)324 623.2 R 2.025
(creates TCP client connections when the pathname)324 635.2 R(consists of)324
647.2 Q F6(tcp/)360 664.2 Q/F8 9/Times-Italic@0 SF(host)A F6(/)A F8(service)A
F4(where)324 682.2 Q/F9 10/Times-Italic@0 SF(host)3.265 E F4 .766
(is either a domain name \(searched for by)3.265 F F3(gethostbyname)324 694.2 Q
F4 3.728(\)o)C 3.727(ra)414.058 694.2 S 3.727(nI)425.555 694.2 S 3.727(Pa)
437.612 694.2 S 1.227(ddress, and)451.339 694.2 R F9(service)3.727 E F4(is)
3.727 E 1.34(either a service name \(found in)324 706.2 R F3(/etc/services)3.84
E F4(\))A(or a decimal port number)324 718.2 Q 5(.F)-.55 G(or e)437.45 718.2 Q
(xample)-.15 E EP
%%Page: 6 6
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Courier@0 SF(tcp/news.host.com/nntp)108 83 Q/F1 10/Times-Roman@0 SF 1.932
(Additionally the string)72 101 R/F2 10/Courier@0 SF(/priv)4.432 E F1 1.931
(can be appended to)4.431 F 1.776(the pathname to specify that a pri)72 113 R
(vile)-.25 E 1.777(ged port \(less)-.15 F
(than 1024\) should be bound to the sock)72 125 Q(et.)-.1 E/F3 12/Times-Bold@0
SF 3(7.2. TCP)72 162.2 R(Namespace: Ser)3 E -.12(ve)-.12 G(rs).12 E F1 3.274
(AT)72 181.4 S .774(CP serv)88.604 181.4 R .774
(er is created when the pathname consists)-.15 F(of)72 193.4 Q F0(tcplisten/)
108 210.4 Q/F4 9/Times-Italic@0 SF(IP)A(addr)-.72 E F0(/)A F4(service)A/F5 10
/Times-Italic@0 SF(IP)72 228.4 Q(addr)-.8 E F1 .583
(is the IP address of a local interf)3.083 F .583(ace bound to)-.1 F 2.379
(the serv)72 240.4 R(er')-.15 E 4.879(sl)-.55 G 2.379(istening sock)127.708
240.4 R 4.879(et. The)-.1 F -.1(ke)4.878 G 2.378(rnel will only).1 F 2.185
(accept incoming connection requests that arri)72 252.4 R 2.485 -.15(ve o)-.25
H(n).15 E .21(this interf)72 264.4 R 2.71(ace. The)-.1 F .21(special v)2.71 F
.21(alue of 0.0.0.0 \(called the)-.25 F 1.278(wildcard\) allo)72 276.4 R 1.278
(ws the serv)-.25 F 1.279(er to accept incoming con-)-.15 F 2.527
(nection requests on an)72 288.4 R 5.027(yl)-.15 G 2.527(ocal interf)181.389
288.4 R(ace.)-.1 E F5(service)7.527 E F1(is)5.027 E 1.797
(either a service name or port number that speci\214es)72 300.4 R(the serv)72
312.4 Q(er')-.15 E 2.5(sw)-.55 G(ell-kno)127.39 312.4 Q(wn port.)-.25 E .28
(There are tw)97 328 R 2.78(op)-.1 G .28(roblems with this type of portal)
160.77 328 R 2.9(service. First,)72 340 R .4(the portal daemon child calls)2.9
F F2(listen)2.9 E F1(and)72 352 Q F2(accept)7.197 E F1 7.197(,w)C 4.697
(aiting for the client connection)146.454 352 R 1.16(request to arri)72 364 R
-.15(ve)-.25 G 6.16(.I).15 G 3.66(fa)150.89 364 S 1.16
(ll is OK, the connected sock)162.32 364 R(et)-.1 E 2.426
(descriptor returned by)72 376 R F2(accept)4.926 E F1 2.425(is returned by the)
4.926 F 2.022(child and becomes the return v)72 388 R 2.023(alue of)-.25 F F2
(open)4.523 E F1 7.023(.T)C(he)278.56 388 Q .955
(child closes the listening sock)72 400 R .954(et before it terminates.)-.1 F
.873(This means the serv)72 412 R .873(er that calls)-.15 F F2(open)3.373 E F1
.874(is an iterati)3.374 F -.15(ve)-.25 G(serv)72 424 Q(er)-.15 E 3.325(,a)-.4
G .825(nd not a concurrent serv)106.145 424 R(er)-.15 E 5.824(.T)-.55 G .824
(here is no w)227.588 424 R(ay)-.1 E 1.218(to lea)72 436 R 1.519 -.15(ve t)-.2
H 1.219(he daemon child in e).15 F 1.219(xistence, with the lis-)-.15 F 2.917
(tening descriptor still open, w)72 448 R 2.916(aiting for additional)-.1 F
(client connections.)72 460 Q 1.551(The TCP serv)97 475.6 R 1.551(er could)-.15
F F2(fork)4.051 E F1 1.551(its o)4.051 F 1.552(wn child to)-.25 F 1.468
(handle the ne)72 487.6 R 3.968(wc)-.25 G 1.468(lient, after)143.634 487.6 R F2
(open)3.967 E F1 1.467(returns, and then)3.967 F(call)72 499.6 Q F2(open)3.747
E F1(ag)3.747 E 1.248(ain, to w)-.05 F 1.248(ait for the ne)-.1 F 1.248
(xt client connec-)-.15 F 2.828(tion. But)72 511.6 R .328(this lea)2.828 F -.15
(ve)-.2 G 2.828(saw).15 G(indo)171.9 511.6 Q 2.828(wo)-.25 G 2.828(ft)204.478
511.6 S .328(ime when a listen-)213.416 511.6 R 1.05(ing serv)72 523.6 R 1.05
(er does not e)-.15 F 1.05(xist on the serv)-.15 F(er')-.15 E 3.55(sw)-.55 G
(ell-kno)247.7 523.6 Q(wn)-.25 E 3.175(port. An)72 535.6 R 3.175(yc)-.15 G .674
(lient connections arri)120.97 535.6 R .674(ving in this windo)-.25 F(w)-.25 E
(will be acti)72 547.6 Q -.15(ve)-.25 G(ly rejected by TCP).15 E(.)-1.11 E
3.155(Second, serv)97 563.2 R 3.155(ers normally need to kno)-.15 F 5.655(wt)
-.25 G(he)278.56 563.2 Q .854(identity of the client.)72 575.2 R 3.354(As)5.854
G(erv)178.21 575.2 Q .853(er written using sock)-.15 F(ets)-.1 E -.1(wo)72
587.2 S 1.482(uld call).1 F F2(getpeername)3.983 E F1 1.483
(to obtain the client')3.983 F 3.983(sI)-.55 G(P)282.44 587.2 Q 2.57
(address and port number once the connection had)72 599.2 R .081
(been accepted.)72 611.2 R .081(The serv)5.081 F .081
(er can use this information to)-.15 F -.25(va)72 623.2 S 2.065
(lidate the client.).25 F -.4(Wi)7.064 G 2.064(th portals, the daemon child).4
F .195(could call)72 635.2 R F2(getpeername)2.695 E F1(after)2.695 E F2(accept)
2.695 E F1 .195(returns, b)2.695 F(ut)-.2 E .598(there is no w)72 647.2 R .597
(ay to return this to the serv)-.1 F .597(er as another)-.15 F .443(return v)72
659.2 R .443(alue from)-.25 F F2(open)2.944 E F1 5.444(.U)C .444
(nless the serv)184.724 659.2 R .444(er is written)-.15 F 1.87
(using a language that pro)72 671.2 R 1.87(vides access to the)-.15 F F2(get-)
4.37 E(peername)72 683.2 Q F1 1.085(function, the client')3.585 F 3.585(si)-.55
G 1.085(dentity is una)214.06 683.2 R -.25(va)-.2 G(il-).25 E(able to the serv)
72 695.2 Q(er)-.15 E(.)-.55 E F3 3(7.3. An)324 84 R(Echo Ser)3 E -.12(ve)-.12 G
3(ra).12 G(nd Client)438.084 84 Q F1([Ste)324 103.2 Q -.15(ve)-.25 G 2.255
(ns 1990] sho).15 F 2.254(ws the C code for a TCP echo)-.25 F(serv)324 115.2 Q
1.152(er and client.)-.15 F 1.152(The client reads a line from stan-)6.152 F
.215(dard input, sends the line to the serv)324 127.2 R(er)-.15 E 2.715(,r)-.4
G .215(eads back the)485.7 127.2 R 1.902(echoed line from the serv)324 139.2 R
(er)-.15 E 4.403(,a)-.4 G 1.903(nd writes the echoed)451.811 139.2 R .684
(line to standard output.)324 151.2 R .684(Each requires about 60 lines)5.684 F
3.614(of C code.)324 163.2 R 3.614(Here is an equi)8.614 F -.25(va)-.25 G 3.615
(lent serv).25 F 3.615(er in Tcl)-.15 F([Ousterhout 1994] using portals.)324
175.2 Q/F6 8/Courier@0 SF(#!/usr/contrib/bin/tclsh)324 191.2 Q
(set f [open "/p/tcplisten/0.0.0.0/7654" r+])324 207.2 Q
(while {[gets $f line] >= 0} {)324 223.2 Q(puts $f $line)343.2 233.2 Q
(flush $f)343.2 243.2 Q(})324 253.2 Q F1 .628(The port number of 7654 is the v)
324 271.2 R .628(alue chosen for this)-.25 F(client and serv)324 283.2 Q(er)
-.15 E(.)-.55 E(Here is the corresponding client in Tcl.)349 298.8 Q F6
(#!/usr/contrib/bin/tclsh)324 314.8 Q
(set f [open "/p/tcp/bsdi.tuc.noao.edu/7654" r+])324 330.8 Q
(while {[gets "stdin" line] >= 0} {)324 346.8 Q(puts $f $line)343.2 356.8 Q
(flush $f)343.2 366.8 Q(gets $f reply)343.2 382.8 Q(puts $reply)343.2 392.8 Q
(})324 402.8 Q F1 .207(Here is the same client, written using the K)349 424.4 R
(orn-)-.35 E(Shell.)324 436.4 Q F6(#!/bin/ksh)324 452.4 Q
(exec 3<>/p/tcp/bsdi.tuc.noao.edu/7654)324 468.4 Q 4.8(#o)453.6 478.4 S
(pen on fd3)468 478.4 Q(while read -r sendline)324 494.4 Q 4.8(#f)453.6 494.4 S
(rom stdin)468 494.4 Q(do)324 504.4 Q(print -r -u3 $sendline # to server)343.2
514.4 Q(read -r -u3 recvline)343.2 524.4 Q 4.8(#f)453.6 524.4 S(rom server)468
524.4 Q(print -r $recvline)343.2 534.4 Q 4.8(#t)453.6 534.4 S 4.8(os)468 534.4
S(tdout)482.4 534.4 Q(done)324 544.4 Q(exec 3<&-)324 560.4 Q 4.8(#c)453.6 560.4
S(lose fd3)468 560.4 Q F1 3.489(Using command-line ar)324 578.4 R 3.488
(guments, the name of the)-.18 F(serv)324 590.4 Q .533
(er host and the port number could be speci\214ed at)-.15 F .184
(run-time, instead of being hard-coded within the v)324 602.4 R(ari-)-.25 E
(ous scripts.)324 614.4 Q F3 3(7.4. Filesystem)324 638.4 R(Namespace)3 E F1
.815(When the pathname be)324 657.6 R .815(gins with)-.15 F F2(fs/)3.315 E F1
.815(the portal dae-)3.315 F 1.62
(mon opens the named \214le, starting at the daemon')324 669.6 R(s)-.55 E 2.5
(root. F)324 681.6 R(or e)-.15 E(xample, an)-.15 E F2(open)2.5 E F1(of)2.5 E F0
(/p/fs/tmp/temp.1)360 698.6 Q EP
%%Page: 7 7
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 2.124(opens the \214le)72 84 R/F1 10/Courier@0 SF
(/tmp/temp.1)4.624 E F0 4.624(,r)C(elati)210.656 84 Q 2.424 -.15(ve t)-.25 H
4.625(ot).15 G 2.125(he dae-)256.725 84 R(mon')72 96 Q 4.78(sr)-.55 G 4.78
(oot. Since)104.56 96 R 2.28(the \214le open mode \(the second)4.78 F(ar)72 108
Q .924(gument to)-.18 F F1(open)3.424 E F0 3.424(\)i)C 3.424(sp)157.752 108 S
.924(assed in the)170.066 108 R F1(portal_cred)3.425 E F0 2.803
(structure, the daemon can open the \214le using the)72 120 R
(options speci\214ed by the caller)72 132 Q(.)-.55 E .915(There are tw)97 147.6
R 3.416(op)-.1 G .916(otential uses for the \214lesystem)162.676 147.6 R 3.545
(namespace. First,)72 159.6 R 1.044(it can pro)3.545 F 1.044
(vide a controlled escape)-.15 F 1.506(from a)72 171.6 R F1(chroot)4.006 E F0
1.507(ed en)B 4.007(vironment. Second,)-.4 F 1.507(the portal)4.007 F 4.292
(daemon can pro)72 183.6 R 4.292(vide access control lists \(A)-.15 F(CLs,)-.4
E .173([Curry 1992]\) to allo)72 195.6 R 2.673(ws)-.25 G .174
(peci\214c users access to \214les to)169.652 195.6 R(which the)72 207.6 Q 2.5
(yn)-.15 G(ormally do not ha)123.51 207.6 Q .3 -.15(ve a)-.2 H(ccess.).15 E/F2
12/Times-Bold@0 SF 3(8. Pr)72 231.6 R(oblem Ar)-.216 E(eas)-.216 E 6.687
(8.1. Standard)72 259.2 R 3.686(I/O Pr)6.687 F 3.686(oblems W)-.216 F 3.686
(ith Net-)-.216 F -.12(wo)72 271.2 S(rk Connections).12 E F0 .458
(In the Tcl client and serv)72 290.4 R .458(er just presented, an e)-.15 F
(xplicit)-.15 E F1(flush)72 302.4 Q F0 2.769
(is performed after each write to the TCP)5.269 F(sock)72 314.4 Q 3.406
(et. This)-.1 F .906(is required since languages such as Tcl)3.406 F 1.368
(and A)72 326.4 R 1.368(wk normally use the standard I/O library)-.92 F 6.367
(.O)-.65 G(n)283 326.4 Q 1.258
(the \214rst I/O operation after a standard I/O stream is)72 338.4 R 1.36
(opened, a call to the)72 350.4 R F1(isatty)3.86 E F0 1.36
(function is issued by)3.86 F 1.69(standard I/O.)72 362.4 R 1.69
(If the standard I/O stream \(not to be)6.69 F .583
(confused with the streams I/O system within the k)72 374.4 R(er)-.1 E(-)-.2 E
.965(nel\) is a terminal de)72 386.4 R .966(vice, the stream is line b)-.25 F
(uf)-.2 E(fered,)-.25 E .269(otherwise the stream is fully b)72 398.4 R(uf)-.2
E 2.769(fered. Since)-.25 F 2.768(as)2.768 G(ock)266.44 398.4 Q(et)-.1 E .841
(is not a terminal de)72 410.4 R .841(vice, the stream is fully b)-.25 F(uf)-.2
E(fered.)-.25 E 1.933(The standard I/O library will not call)72 422.4 R F1
(write)4.432 E F0(until)4.432 E 1.79(either the b)72 434.4 R(uf)-.2 E 1.79
(fer is full \(normally the b)-.25 F(uf)-.2 E 1.79(fer size is)-.25 F
(8192 bytes\) or the application calls)72 446.4 Q F1(fflush)2.5 E F0(.)A .146
(This is a problem because when the line of out-)97 462 R 1.191
(put going to the serv)72 474 R 1.191(er is b)-.15 F(uf)-.2 E 1.191
(fered by the client, the)-.25 F(serv)72 486 Q .186(er will be block)-.15 F
.186(ed reading from its sock)-.1 F .185(et and the)-.1 F .104
(client will be block)72 498 R .104(ed reading from its sock)-.1 F 2.605
(et. This)-.1 F(is)2.605 E(called)72 510 Q/F3 10/Times-Italic@0 SF(deadloc)
3.193 E(k)-.2 E F0 5.693(.T)C .693(his is the same problem described)149.276
510 R 3.015(in Section 14.4 of [Ste)72 522 R -.15(ve)-.25 G 3.015
(ns 1992] with re).15 F -.05(ga)-.15 G 3.015(rd to).05 F
(coprocesses and the standard I/O library)72 534 Q(.)-.65 E F2 5.597(8.2. A)72
558 R 2.597(wk Pr)-1.08 F 2.597(oblems W)-.216 F 2.597(ith Netw)-.216 F 2.596
(ork Con-)-.12 F(nections)72 570 Q F0 -1 -.8(Tw o)72 589.2 T .425
(problems arise when using portals with the A)3.725 F(wk)-.92 E 5.383
(language. First)72 601.2 R 2.883(is the standard I/O \215ush problem)5.383 F
.262(mentioned abo)72 613.2 R -.15(ve)-.15 G 2.762(,b).15 G .262(ecause unlik)
150.824 613.2 R 2.762(eT)-.1 G .263(cl, there is no w)214.008 613.2 R(ay)-.1 E
(to \215ush an A)72 625.2 Q(wk I/O stream e)-.92 E(xplicitly)-.15 E(.)-.65 E
3.359(Second is the inability to specify the open)97 640.8 R .828
(mode of a \214le with A)72 652.8 R 3.328(wk. \(The)-.92 F F1(r+)3.328 E F0
.829(in the Tcl scripts)3.328 F .053
(says to open the \214le for read and write.\))72 664.8 R -.92(Aw)5.052 G 2.552
(ko).92 G .052(pens a)262.678 664.8 R .225
(\214le read-only or write-only: there is no w)72 676.8 R .225(ay to open a)-.1
F 1.412(\214le for reading and writing, which is required for a)72 688.8 R
(full-duple)72 700.8 Q 2.5(xs)-.15 G(ock)122.68 700.8 Q(et.)-.1 E F2 4.785
(8.3. Interruptibility)324 84 R 1.785(of Netw)4.785 F 1.785(ork Connec-)-.12 F
(tions)324 96 Q F0 1.486(When a process creates a TCP connection, the pro-)324
115.2 R .94(cess is often put to sleep by the)324 127.2 R F1(connect)3.44 E F0
(function,)3.44 E 1.187(which can tak)324 139.2 R 3.686(es)-.1 G 1.186
(econds to complete.)393.83 139.2 R 1.186(If the connec-)6.186 F .075
(tion cannot be established, and is not acti)324 151.2 R -.15(ve)-.25 G .075
(ly rejected).15 F .076(by the other end point, the call to)324 163.2 R F1
(connect)2.575 E F0(normally)2.575 E .394(blocks for 75 seconds.)324 175.2 R
.395(When we run a program such)5.394 F 1.117(as a T)324 187.2 R 1.116
(elnet client or an FTP client, we just type our)-.7 F(interrupt k)324 199.2 Q
.3 -.15(ey t)-.1 H 2.5(oa).15 G(bort the connection attempt.)392.35 199.2 Q
1.922(Since an)349 214.8 R F1(open)4.422 E F0 1.922
(of a portal object is a single)4.422 F 1.049(system call, and in)324 226.8 R
-.2(vo)-.4 G(lv).2 E 1.048(es another process \(the portal)-.15 F .964
(daemon\), the call to)324 238.8 R F1(open)3.464 E F0 .965
(is not interruptible in the)3.464 F .816(4.4BSD implementation of portals.)324
250.8 R 2.416 -.8(We c)5.816 H .815(an type our).8 F .13(interrupt k)324 262.8
R .43 -.15(ey a)-.1 H 2.63(so).15 G .13(ften as we lik)393.85 262.8 R .13(e, b)
-.1 F .13(ut until the daemon)-.2 F 1.771
(returns an error after 75 seconds, the call to)324 274.8 R F1(open)4.271 E F0
3.282(cannot be interrupted.)324 286.8 R 3.283(This can be frustrating to)8.283
F(users.)324 298.8 Q F2 3(9. P)324 337.2 R(erf)-.24 E(ormance)-.3 E 10.155
(9.1. P)324 364.8 R 7.155(ortals V)-.24 F 7.154(ersus Other F)-1.2 F 7.154
(orms of)-.3 F(Descriptor P)324 376.8 Q(assing)-.12 E F0 3.138 -.8(We r)324 396
T 1.538(an a set of timing tests to compare the perfor).8 F(-)-.2 E 1.106
(mance of portals v)324 408 R 1.106(ersus other forms of client\211serv)-.15 F
(er)-.15 E .98(descriptor passing.)324 420 R .98(The goal is to v)5.98 F .98
(erify that portals)-.15 F .977(do not perform w)324 432 R .976
(orse than other forms of descriptor)-.1 F 2.5(passing. Three)324 444 R
(tests were run.)2.5 E 5.28(1. Portals.)324 463.2 R 8.428
(The client program opens the pathname)339.28 475.2 R F1(/p/tcp/127.0.0.1/13)
339.28 487.2 Q F0 5.167(,t)C 2.667(he daytime serv)463.727 487.2 R(er)-.15 E
.732(on the local host.)339.28 499.2 R .732(It then reads from the descrip-)
5.732 F .891(tor that is returned, writing the result to standard)339.28 511.2
R .013(output \(which is redirected to)339.28 523.2 R F1(/dev/null)2.514 E F0
2.514(\). The)B 2.649(descriptor is closed.)339.28 535.2 R 2.648
(This loop is e)7.649 F -.15(xe)-.15 G 2.648(cuted 20).15 F(times.)339.28 547.2
Q 2.738(The portal daemon w)339.28 566.4 R 2.739(as modi\214ed for this test,)
-.1 F(remo)339.28 578.4 Q 1.764(ving the)-.15 F F1(fork)4.264 E F0 1.764
(of a child process.)4.264 F 1.763(This is)6.763 F .181(because the ne)339.28
590.4 R .181(xt tw)-.15 F 2.681(ot)-.1 G .181(ests do not in)428.624 590.4 R
-.2(vo)-.4 G(lv).2 E 2.681(ea)-.15 G F1(fork).001 E F0(,)A 2.979
(and it also remo)339.28 602.4 R -.15(ve)-.15 G 5.479(st).15 G 2.979
(he time required for the)433.666 602.4 R F1(fork)339.28 614.4 Q F0 2.115
(from the o)4.615 F -.15(ve)-.15 G 2.116(rall timing.).15 F 2.116
(Also, a dotted-)7.116 F 1.101(decimal IP address and decimal port number are)
339.28 626.4 R .677(speci\214ed, to remo)339.28 638.4 R .977 -.15(ve t)-.15 H
.877 -.1(wo m).15 H .677(ore v).1 F .677(ariables from the)-.25 F 2.266
(timings: the calls to)339.28 650.4 R F1(gethostbyname)4.766 E F0(\(which)4.766
E(in)339.28 662.4 Q -.2(vo)-.4 G(lv).2 E 1.286(es a name serv)-.15 F 1.286
(er\) and)-.15 F F1(getservbyname)3.786 E F0(.)A(Finally)339.28 674.4 Q 2.895
(,t)-.65 G .395(he daytime service is pro)375.145 674.4 R .395
(vided internally)-.15 F 3.122(by the)339.28 686.4 R F1(inetd)5.622 E F0(serv)
5.622 E 3.123(er and does not in)-.15 F -.2(vo)-.4 G(lv).2 E 5.623(ea)-.15 G F1
(fork)339.28 698.4 Q F0(or an)2.5 E F1(exec)2.5 E F0(.)A EP
%%Page: 8 8
%%BeginPageSetup
BP
%%EndPageSetup
.32 LW 492.8 76 119.2 76 DL/F0 8/Times-Roman@0 SF
(descriptor passing \(Sec. 9.1\))260.364 84 Q(portal/direct open \(Sec. 9.2\))
396.032 84 Q 492.8 88 225.8 88 DL 440.8 88 440.8 88 DL 278.8 88 278.8 88 DL
54.328(BSD/386 SVR4 BSD/386)263.908 96 R 492.8 100 225.8 100 DL(Unix domain)
284.8 108 Q(direct)458.692 108 Q(sock)294.064 118 Q 139.376(ets client)-.08 F
(portals)240.912 113 Q/F1 8/Courier@0 SF(connld)345.4 113 Q F0(portals)402.912
113 Q 492.8 122 119.2 122 DL 492.8 124 119.2 124 DL(client real time)123.2 132
Q 38(0.53 2.21 2.76 1.90 1.21)244.8 132 R(client user CPU time)123.2 142 Q 38
(0.00 0.00 0.05 0.01 0.05)244.8 142 R(client system CPU time)123.2 152 Q 38
(0.15 0.36 0.41 0.19 0.23)244.8 152 R 492.8 156 119.2 156 DL
(client total CPU time)123.2 164 Q 38(0.15 0.36 0.46 0.20 0.28)244.8 164 R
492.8 168 119.2 168 DL(serv)123.2 176 Q(er total CPU time)-.12 E 38
(0.11 0.20 0.01 1.04)244.8 176 R 492.8 180 119.2 180 DL(client)123.2 188 Q/F2 8
/Symbol SF(+)2 E F0(serv)2 E(er total CPU time)-.12 E 38
(0.26 0.56 0.47 1.24 0.28)244.8 188 R 492.8 192 119.2 192 DL 440.8 100 440.8
192 DL 385.8 76 385.8 192 DL 387.8 76 387.8 192 DL 332.8 88 332.8 192 DL 278.8
100 278.8 192 DL 223.8 76 223.8 192 DL 225.8 76 225.8 192 DL 492.8 76 492.8 192
DL 119.2 76 119.2 192 DL/F3 9/Times-Roman@0 SF(Figure 8:)160.114 209.6 Q -.315
(Ti)6.75 G(ming comparisons: descriptor passing and portal v).315 E
(ersus direct open.)-.135 E/F4 10/Times-Roman@0 SF 5.28(2. Berk)72 238.4 R(ele)
-.1 E 2.5(yU)-.15 G(nix domain sock)132.85 238.4 Q(ets.)-.1 E 6.729
(This test is a slight modi\214cation of the)87.28 250.4 R(client\211serv)87.28
262.4 Q 5.678(er functions in Section 15.5.2 of)-.15 F([Ste)87.28 274.4 Q -.15
(ve)-.25 G .79(ns 1992].).15 F 3.29(As)5.79 G(erv)170.63 274.4 Q .79
(er is started that creates a)-.15 F 2.865(Unix domain sock)87.28 286.4 R 2.865
(et and binds its well-kno)-.1 F(wn)-.25 E .178(pathname to the sock)87.28
298.4 R 2.678(et. The)-.1 F .177(client creates a Unix)2.677 F 2.008
(domain sock)87.28 310.4 R 2.009(et and connects to the serv)-.1 F(er)-.15 E
7.009(.T)-.55 G(he)278.56 310.4 Q .061
(client writes a one-line request to the serv)87.28 322.4 R(er)-.15 E 2.561(,s)
-.4 G(pec-)270.79 322.4 Q .304(ifying the name of a \214le to open and w)87.28
334.4 R .305(aits for the)-.1 F(serv)87.28 346.4 Q 2.548
(er to return either a descriptor or an error)-.15 F 2.792(code. The)87.28
358.4 R(serv)2.792 E .292(er w)-.15 F .293(as modi\214ed to al)-.1 F -.1(wa)-.1
G .293(ys create a).1 F .62(TCP connection to 127.0.0.1, port 13.)87.28 370.4 R
.62(The client)5.62 F 2.74(reads from the returned descriptor)87.28 382.4 R
5.24(,w)-.4 G 2.74(riting the)248.87 382.4 R 3.93
(result to standard output \(redirected ag)87.28 394.4 R 3.93(ain to)-.05 F/F5
10/Courier@0 SF(/dev/null)87.28 406.4 Q F4 4.016(\). The)B 1.516
(client closes the connection)4.016 F(to the serv)87.28 418.4 Q(er)-.15 E 5(.T)
-.55 G(his loop is e)149.62 418.4 Q -.15(xe)-.15 G(cuted 20 times.).15 E .323
(The client and serv)87.28 436.4 R .322(er do not maintain the connec-)-.15 F
.961(tion between them each time around the loop, to)87.28 448.4 R(allo)87.28
460.4 Q 3.617(wc)-.25 G 1.117(omparison with the portal v)117.307 460.4 R 3.616
(ersion. Natu-)-.15 F(rally)87.28 472.4 Q 3.076(,i)-.65 G 3.076(ft)113.316
472.4 S .576(he client and serv)122.502 472.4 R .577(er maintained this con-)
-.15 F 1.139(nection, the continual passing of a client request)87.28 484.4 R
(follo)87.28 496.4 Q 3.042(wed by the return of a descriptor by the)-.25 F
(serv)87.28 508.4 Q .098(er w)-.15 F .098(ould be f)-.1 F .097
(aster than creating and then tear)-.1 F(-)-.2 E(ing do)87.28 520.4 Q
(wn the connection for each request.)-.25 E 5.28(3. SVR4)72 536 R F5(connld)2.5
E F4(streams module.)2.5 E .311(This test is similar to the pre)87.28 548 R
.311(vious one, b)-.25 F .311(ut it uses)-.2 F 2.126(the client\211serv)87.28
560 R 2.126(er connection functions based on)-.15 F .51(the SVR4)87.28 572 R F5
(connld)3.01 E F4 .51(streams module from Section)3.01 F(15.5.1 of [Ste)87.28
584 Q -.15(ve)-.25 G(ns 1992].).15 E -.7(Te)72 599.6 S 1.205
(sts 1 and 2 were run on the same hardw).7 F 1.204(are \(a 25)-.1 F 6.373
(Mhz 80386\) with the same operating system)72 611.6 R 2.963(\(BSD/386 V)72
623.6 R 2.963(ersion 1.1, with the portal code from)-1.11 F 1.305
(4.4BSD-Lite added by the authors\).)72 635.6 R -.7(Te)6.305 G 1.305(st 3 w).7
F 1.305(as run)-.1 F 1.069(on the same hardw)72 647.6 R 1.069(are, b)-.1 F
1.069(ut a dif)-.2 F 1.068(ferent operating sys-)-.25 F .894(tem \(SVR4 V)72
659.6 R .894(ersion 2.0\).)-1.11 F .895(This adds some v)5.894 F(ariability)
-.25 E .517(to the timings because the creation of a TCP connec-)72 671.6 R
.386(tion to the local daytime serv)72 683.6 R .386(er uses dif)-.15 F .387
(ferent TCP/IP)-.25 F 1.525(implementations on the tw)72 695.6 R 4.025(od)-.1 G
(if)196.89 695.6 Q 1.525(ferent operating sys-)-.25 F 6.275(tems. Also,)72
707.6 R 3.775(on this hardw)6.275 F 3.775(are BSD/386 pro)-.1 F(vides)-.15 E
6.557(higher resolution timing by reading the high)72 719.6 R .351
(resolution hardw)324 238.4 R .352(are clock, while SVR4 pro)-.1 F .352
(vides tim-)-.15 F 1.528(ings only in multiples of the system softw)324 250.4 R
1.527(are clock)-.1 F(\(10 ms per clock tick\).)324 262.4 Q 1.2
(The \214rst three columns of Figure 8 sho)349 278 R 1.2(ws the)-.25 F
(timing results.)324 290 Q(All times are in seconds.)5 E .681
(The \214rst three ro)349 305.6 R .681(ws gi)-.25 F .981 -.15(ve t)-.25 H .681
(he real time \(i.e., the).15 F -.1(wa)324 317.6 S 1.981
(ll clock time on an otherwise idle system\), user).1 F .204
(CPU time, and system CPU time for the three clients.)324 329.6 R 1.27
(The serv)324 341.6 R 1.27(er total CPU time w)-.15 F 1.27
(as obtained by running)-.1 F(the)324 353.6 Q F5(ps)2.5 E F4
(command before and after the client w)2.5 E(as run.)-.1 E 4.564
(These numbers sho)349 369.2 R 7.063(wt)-.25 G 4.563(hat a Unix domain)452.151
369.2 R(sock)324 381.2 Q .475(et is about the same as the SVR4)-.1 F F5(connld)
2.976 E F4(mod-)2.976 E 3.288(ule \(which isn')324 393.2 R 5.787(ts)-.18 G
3.287(urprising, since the)402.842 393.2 R 5.787(yd)-.15 G 5.787(os)501.433
393.2 S(imilar)516.11 393.2 Q(things\) b)324 405.2 Q
(ut the portal implementation is f)-.2 E(aster still.)-.1 E/F6 12/Times-Bold@0
SF 3(9.2. P)324 434 R(ortals V)-.24 E(ersus Dir)-1.2 E(ect Client Open)-.216 E
F4 1.998(Another set of timing tests were run to compare a)324 450.8 R 1.73
(client using portals v)324 462.8 R 1.73(ersus a client calling)-.15 F F5
(socket)4.23 E F4(and)324 474.8 Q F5(connect)4.455 E F4(directly)4.455 E 6.955
(.W)-.65 G 4.455(ee)437.345 474.8 S 1.955(xpect the latter to be)450.53 474.8 R
-.1(fa)324 486.8 S(ster).1 E 3.328(,s)-.4 G .828(ince the o)355.428 486.8 R
-.15(ve)-.15 G .828(rhead of in).15 F -.2(vo)-.4 G .827(king the portal dae-).2
F .914(mon and the passing and recei)324 498.8 R .915(ving of a descriptor is)
-.25 F -.2(avo)324 510.8 S(ided.).2 E 5.28(1. Portal)324 526.4 R(client.)2.5 E
8.428(The client program opens the pathname)339.28 538.4 R F5
(/p/tcp/sun.tuc.noao.edu/daytime)339.28 550.4 Q F4(,)A .284(the daytime serv)
339.28 562.4 R .283(er on a dif)-.15 F .283(ferent host on the local)-.25 F
4.157(subnet. A)339.28 574.4 R 1.657(hostname and service name are used)4.157 F
.923(this time, instead of the numeric v)339.28 586.4 R .922(alues from the)
-.25 F(pre)339.28 598.4 Q .504
(vious set of timing tests, to include the typical)-.25 F -.15(ove)339.28 610.4
S 2.55(rhead in).15 F -.2(vo)-.4 G(lv).2 E 2.55(ed in contacting a name serv)
-.15 F(er)-.15 E .178(and reading the)339.28 622.4 R F5(/etc/services)2.678 E
F4 2.679(\214le. The)2.678 F(host)2.679 E 1.988(running the name serv)339.28
634.4 R 1.987(er is another host on the)-.15 F 1.61(local subnet.)339.28 646.4
R(Additionally)6.61 E 4.11(,t)-.65 G(he)457.35 646.4 Q F5(fork)4.11 E F4 1.61
(of a child)4.11 F -.1(wa)339.28 658.4 S 2.964(sp).1 G .463
(ut back into the portal daemon, since this is)362.694 658.4 R 1.893
(its normal mode of operation.)339.28 670.4 R 1.893(The client reads)6.893 F
1.853(from the descriptor that is returned, writing the)339.28 682.4 R 1.654
(result to standard output \(which is redirected to)339.28 694.4 R F5
(/dev/null)339.28 706.4 Q F4 3.995(\). The)B 1.495
(descriptor is closed and the)3.995 F(loop is e)339.28 718.4 Q -.15(xe)-.15 G
(cuted 20 times.).15 E EP
%%Page: 9 9
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 5.28(2. Direct)72 84 R(client open.)2.5 E 7.53
(The client calls)87.28 96 R/F1 10/Courier@0 SF(gethostbyname)173.47 96 Q F0(,)
A F1(get-)264 96 Q(servbyname)87.28 108 Q F0(,)A F1(socket)7.14 E F0 7.14(,a)C
(nd)207 108 Q F1(connect)7.14 E F0 7.14(,t)C(he)278.56 108 Q .466
(same steps performed by the portal daemon.)87.28 120 R(The)5.466 E .835
(client reads from the sock)87.28 132 R .835(et, writing the result to)-.1 F
6.547(standard output \(redirected to)87.28 144 R F1(/dev/null)9.048 E F0(ag)
87.28 156 Q 4.416(ain\). The)-.05 F(sock)4.416 E 1.916
(et descriptor is closed and the)-.1 F(loop is e)87.28 168 Q -.15(xe)-.15 G
(cuted 20 times.).15 E 2.045(The \214nal tw)97 183.6 R 4.545(oc)-.1 G 2.045
(olumns of Figure 8 sho)163.305 183.6 R 4.545(wt)-.25 G(he)278.56 183.6 Q
(timing results.)72 195.6 Q(All times are in seconds.)5 E 1.64
(The real time for this portal v)97 211.2 R 1.64(ersion \(1.90\) is)-.15 F .954
(higher than the real time for the pre)72 223.2 R .955(vious portal v)-.25 F
(er)-.15 E(-)-.2 E 1.466(sion \(0.53\).)72 235.2 R 3.066 -.8(We e)6.466 H 1.466
(xpect this since a).65 F F1(fork)3.965 E F0 1.465(is occur)3.965 F(-)-.2 E
.986(ring, and the child is calling)72 247.2 R F1(gethostbyname)3.486 E F0(and)
3.486 E F1(getservbyname)72 259.2 Q F0 .23(before it can return the connected)
2.73 F(descriptor)72 271.2 Q(.)-.55 E 2.148(The serv)97 286.8 R 2.149
(er CPU time in these e)-.15 F 2.149(xamples w)-.15 F(as)-.1 E .602
(obtained by running the)72 298.8 R F1 -2.899(ps -S)3.101 F F0 .601
(command before and)3.101 F .414(after the client w)72 310.8 R .414(as run.)-.1
F(The)5.414 E F1(-S)2.914 E F0 .414(\215ag causes the CPU)2.914 F 1.932
(time output to include the CPU time for all termi-)72 322.8 R .235
(nated children.)72 334.8 R 1.835 -.8(We n)5.235 H .236
(eed to account for the CPU time).8 F 2.02
(of the 20 children, since that is where the calls to)72 346.8 R F1
(gethostbyname)72 358.8 Q F0(,)A F1(getservbyname)8.25 E F0(,)A F1(socket)8.25
E F0(,)A(and)72 370.8 Q F1(connect)2.5 E F0(tak)2.5 E 2.5(ep)-.1 G(lace.)157.5
370.8 Q .684(The end result of these comparisons is that the)97 386.4 R .407
(portal client requires about 50% more clock time and)72 398.4 R 3.044
(about 4.5 times the CPU time as a direct client.)72 410.4 R(Remember)72 422.4
Q 3.37(,h)-.4 G -.25(ow)126.35 422.4 S -2.15 -.25(ev e).25 H 1.67 -.4(r, t).25
H .87(hat this test only measures the).4 F 1.335
(times to establish a connection with a serv)72 434.4 R 1.334(er on the)-.15 F
.777(local subnet, recei)72 446.4 R 1.078 -.15(ve a)-.25 H .778
(bout 30 bytes of data from the).15 F(serv)72 458.4 Q(er)-.15 E 2.806(,a)-.4 G
.306(nd terminate the connection.)105.626 458.4 R .305(Most TCP con-)5.306 F
1.001(nections are dominated by data transfer)72 470.4 R 3.502(,n)-.4 G 1.002
(ot connec-)245.068 470.4 R 3.08(tion setup and teardo)72 482.4 R 5.58
(wn. Once)-.25 F 3.08(the connection is)5.58 F 2.248
(established, the data transfer time is unaf)72 494.4 R 2.249(fected by)-.25 F
1.782(whether the sock)72 506.4 R 1.782(et descriptor w)-.1 F 1.781
(as obtained directly)-.1 F(by the client, or from a portal daemon.)72 518.4 Q
/F2 12/Times-Bold@0 SF 3(10. Summary)72 542.4 R F0 2.437(Portals can pro)72 558
R 2.437(vide access to a v)-.15 F 2.438(ariety of objects,)-.25 F 1.008
(such as de)72 570 R 1.007(vices, special \214le types, and netw)-.25 F 1.007
(ork con-)-.1 F .49(nections, to nai)72 582 R .79 -.15(ve a)-.25 H 2.99
(pplications. This).15 F .49(is done by plac-)2.99 F 1.698
(ing a minimal amount of code within the k)72 594 R 1.697(ernel to)-.1 F 1.261
(detect special pathnames that are being opened, and)72 606 R .503
(pass these to a user)72 618 R .502(-mode daemon.)-.2 F .502(This daemon can)
5.502 F 1.206(do whate)72 630 R -.15(ve)-.25 G 3.706(ri).15 G 3.706(tw)128.442
630 S 1.207(ants to pro)142.048 630 R 1.207(vide access to the speci-)-.15 F
.963(\214ed object.)72 642 R 3.463(Ad)5.963 G .962
(escriptor is passed from the daemon)139.049 642 R 1.837(to the k)72 654 R
1.837(ernel and back to the process as the return)-.1 F -.25(va)72 666 S
(lue from).25 E F1(open)2.5 E F0(.)A 3.728
(Although descriptor passing and connection)97 681.6 R(serv)72 693.6 Q 2.641
(ers ha)-.15 F 2.941 -.15(ve b)-.2 H 2.642(een possible for years within major)
.15 F 2.24(Unix systems, the use of these f)72 705.6 R 2.24(acilities has ne)
-.1 F -.15(ve)-.25 G(r).15 E 3.06(been transparent.)72 717.6 R 3.06
(Portals are an attempt to mak)8.06 F(e)-.1 E 1.995(these f)324 84 R 1.995
(acilities transparent, although portals are not)-.1 F(without their o)324 96 Q
(wn unique set of problems.)-.25 E 1.274(Portals ha)349 111.6 R 1.574 -.15
(ve b)-.2 H 1.274(een implemented under 4.4BSD).15 F -.2(bu)324 123.6 S 4.565
(tc).2 G 2.065(ould easily be implemented in an)345.585 123.6 R 4.565(yv)-.15 G
2.065(ersion of)502.665 123.6 R(Unix that supports dif)324 135.6 Q
(ferent types of \214lesystems.)-.25 E F2(Ackno)324 159.6 Q(wledgments)-.12 E
F0 .701(One of the authors \(jsp\) is responsible for the design)324 175.2 R
.699(and implementation of portals in 4.4BSD and should)324 187.2 R 1.52
(be credited with the ideas herein.)324 199.2 R 1.52(The other author)6.52 F
.55(\(wrs\) disco)324 211.2 R -.15(ve)-.15 G .55
(red them in the 4.4BSD release and felt).15 F(the)324 223.2 Q 3.135(yw)-.15 G
.635(ere an important concept to document for oth-)351.425 223.2 R 1.628
(ers to learn about.)324 235.2 R 1.628(Our thanks to Gary Wright and)6.628 F
1.875(the anon)324 247.2 R 1.876(ymous referees for their comments on this)-.15
F(paper)324 259.2 Q(.)-.55 E/F3 10/Times-Bold@0 SF(Refer)324 300 Q(ences)-.18 E
F0 .82(Aho, A. V)324 315.6 R .82(., K)-1.29 F .82(ernighan, B. W)-.25 F .82
(., and W)-.92 F(einber)-.8 E(ger)-.18 E 3.32(,P)-.4 G 3.32(.J)525.29 315.6 S
(.,)535 315.6 Q/F4 10/Times-Italic@0 SF 2.752(The A)349 327.6 R 2.752(WK Pr)
-.95 F -.1(og)-.45 G -.15(ra).1 G 2.753(mming Langua).15 F -.1(ge,)-.1 G F0
(Addison-)5.353 E -.8(We)349 339.6 S(sle).8 E 1.3 -.65(y, R)-.15 H
(eading, Mass. \(1988\).).65 E -1.11(AT)324 355.2 S(&T)1.11 E(,)-.74 E F4 1.68
(UNIX Resear)4.18 F 1.98 -.15(ch S)-.37 H 1.68(ystem Pr).15 F -.1(og)-.45 G
-.15(ra).1 G(mmer').15 E 4.18(sM)-.4 G(an-)526.67 355.2 Q .67(ual, T)349 367.2
R .67(enth Edition, V)-.92 F .67(olume I,)-1.11 F F0 .67(Saunders Colle)3.17 F
(ge)-.15 E(Publishing, F)349 379.2 Q(ort W)-.15 E(orth, T)-.8 E -.15(ex)-.7 G
2.5(.\().15 G(1990\).)468.59 379.2 Q .949(Bershad, B. N., and Pink)324 394.8 R
.948(erton, C. B., \231W)-.1 F(atchdogs\212)-.8 E .896
(Extending the UNIX File System,)349 406.8 R<9a>-.7 E F4(Computing)3.396 E
(Systems,)349 418.8 Q F0(1, 2, pp. 169-188 \(1988\).)2.5 E(Curry)324 434.4 Q
4.933(,D)-.65 G 4.933(.A)361.333 434.4 S(.,)375.986 434.4 Q F4 2.432
(UNIX System Security: A Guide for)4.933 F(User)349 446.4 Q 6.38(sa)-.1 G 3.88
(nd System Administr)383.61 446.4 R(ator)-.15 E(s,)-.1 E F0(Addison-)6.38 E -.8
(We)349 458.4 S(sle).8 E 1.3 -.65(y, R)-.15 H(eading, Mass. \(1992\).).65 E(Jo)
324 474 Q 3.17 -.65(y, W)-.1 H 4.37(.N)-.27 G 1.87(., Cooper)366.62 474 R 4.37
(,E)-.4 G 1.87(., F)418.01 474 R(abry)-.15 E 4.37(,R)-.65 G 4.37(.S)463.45 474
S 1.87(., Lef)475.88 474 R(\215er)-.25 E 4.37(,S)-.4 G 4.37(.J)524.24 474 S(.,)
535 474 Q(McK)349 486 Q 2.113(usick, M. K., and Mosher)-.15 F 4.614(,D)-.4 G
2.114(., \2314.2BSD)493.996 486 R .015(System Manual,)349 498 R 2.515<9a55>-.7
G .015(NIX Programmer')427.49 498 R 2.515(sM)-.55 G(anual,)515.84 498 Q 3.77
(4.2 Berk)349 510 R(ele)-.1 E 6.27(yS)-.15 G(oftw)415.45 510 Q 3.77
(are Distrib)-.1 F 3.77(ution, V)-.2 F(olume)-1.29 E .938
(2C, Computer Systems Research Group, Uni)349 522 R -.65(v.)-.25 G
(of California, Berk)349 534 Q(ele)-.1 E 1.3 -.65(y, C)-.15 H(alif. \(1983\).)
.65 E 1.663(Ousterhout, J. K.,)324 549.6 R F4 1.664(Tcl and the Tk T)4.164 F
(oolkit,)-.92 E F0(Addison-)4.164 E -.8(We)349 561.6 S(sle).8 E 1.3 -.65(y, R)
-.15 H(eading, Mass. \(1994\).).65 E 2.806
(Presotto, D. L., and Ritchie, D. M., \231Interprocess)324 577.2 R 2.588
(Communication in the Eighth Edition UNIX)349 589.2 R(System,)349 601.2 Q<9a>
-.7 E F4(Pr)6.6 E 4.1(oceedings of the 1985 Summer)-.45 F(USENIX Confer)349
613.2 Q(ence)-.37 E(,)-.1 E F0(Portland, Ore)2.5 E(g. \(1985\).)-.15 E 2.806
(Presotto, D. L., and Ritchie, D. M., \231Interprocess)324 628.8 R 3.366
(Communication in the Ninth Edition UNIX)349 640.8 R(System,)349 652.8 Q<9a>-.7
E F4(Softwar)3.746 E 3.746(eP)-.37 G -.15(ra)433.482 652.8 S 1.246
(ctice & Experience).15 F(,)-.1 E F0(20,)3.746 E(S1, pp. S1/3-S1/17 \(1990\).)
349 664.8 Q 1.944(Presotto, D., and W)324 680.4 R 1.943(interbottom, P)-.4 F
1.943(., \231The Or)-1.11 F -.05(ga)-.18 G(niza-).05 E .248(tion of Netw)349
692.4 R .249(orks in Plan 9,)-.1 F<9a>-.7 E F4(Pr)2.749 E .249
(oceedings of the)-.45 F .186(1993 W)349 704.4 R .186(inter USENIX Confer)-.55
F(ence)-.37 E(,)-.1 E F0 .186(pp. 271-280,)2.686 F(San Die)349 716.4 Q
(go, Calif. \(1993\).)-.15 E EP
%%Page: 10 10
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(Ste)72 84 Q -.15(ve)-.25 G 1.401(ns, W).15 F 3.901(.R)
-.92 G(.,)130.702 84 Q/F1 10/Times-Italic@0 SF 1.402(UNIX Network Pr)3.902 F
-.1(og)-.45 G -.15(ra).1 G(mming).15 E(,)-.1 E F0(Pren-)3.902 E
(tice-Hall, Engle)97 96 Q -.1(wo)-.25 G(od Clif).1 E(fs, N.J. \(1990\).)-.25 E
(Ste)72 111.6 Q -.15(ve)-.25 G .633(ns, W).15 F 3.133(.R)-.92 G(.,)129.166
111.6 Q F1 .633(Advanced Pr)3.133 F -.1(og)-.45 G -.15(ra).1 G .633
(mming in the UNIX).15 F(En)97 123.6 Q(vir)-.4 E(onment,)-.45 E F0(Addison-W)
3.38 E(esle)-.8 E 2.18 -.65(y, R)-.15 H .88(eading, Mass.).65 F(\(1992\).)97
135.6 Q -.8(Wa)72 151.2 S 2.557(ll, L., and Schw).8 F 2.557(artz, R. L.,)-.1 F
F1(Pr)5.057 E -.1(og)-.45 G -.15(ra).1 G 2.557(mming perl,).15 F F0 6.015
(O'Reilly & Associates, Sebastopol, Calif.)97 163.2 R(\(1991\).)97 175.2 Q -.8
(We)72 190.8 S 1.039(lch, B., \231).8 F 3.539(AC)-.8 G 1.038
(omparison of Three Distrib)139.617 190.8 R 1.038(uted File)-.2 F .926
(System Architectures: Vnode, Sprite, and Plan)97 202.8 R(9,)97 214.8 Q<9a>-.7
E F1 4.22(Computing Systems,)6.72 F F0 4.22(7, 2, pp. 175-199)6.72 F(\(1994\).)
97 226.8 Q -.8(We)72 242.4 S 5.22
(lch, B. B., and Ousterhout, J. K., \231Pseudo).8 F(De)97 254.4 Q 2.32
(vices: User)-.25 F(-Le)-.2 E -.15(ve)-.25 G 4.82(lE).15 G 2.32
(xtensions to the Sprite)191.87 254.4 R .406(File System,)97 266.4 R<9a>-.7 E
F1(Pr)2.906 E .407(oceedings of the 1988 Summer)-.45 F .244(USENIX Confer)97
278.4 R(ence)-.37 E(,)-.1 E F0 .244(pp. 37-49, San Francisco,)2.744 F
(Calif. \(1988\).)97 290.4 Q/F2 10/Times-Bold@0 SF 2.772 -.92(W. R)72 326.4 T
.932(ichard Ste).92 F -.1(ve)-.15 G(ns).1 E F0 .933(is the author of)3.432 F F1
.933(UNIX Network)3.433 F(Pr)72 338.4 Q -.1(og)-.45 G -.15(ra).1 G(mming).15 E
F0 2.075(\(Prentice-Hall, 1990\),)4.575 F F1 2.075(Advanced Pr)4.575 F(o-)-.45
E(gr)72 350.4 Q 5.57(amming in the UNIX En)-.15 F(vir)-.4 E(onment)-.45 E F0
(\(Addison-)8.07 E -.8(We)72 362.4 S(sle).8 E 4.122 -.65(y, 1)-.15 H(992\),).65
E F1 2.822(TCP/IP Illustr)5.322 F 2.822(ated, V)-.15 F 2.821(olume 1: The)-1.11
F(Pr)72 374.4 Q(otocols)-.45 E F0(\(Addison-W)2.616 E(esle)-.8 E 1.416 -.65
(y, 1)-.15 H .116(994\), and coauthor with).65 F .354(Gary R. Wright of)72
386.4 R F1 .354(TCP/IP Illustr)2.854 F .354(ated, V)-.15 F .353(olume 2: The)
-1.11 F(Implementation)72 398.4 Q F0(\(Addison-W)4.34 E(esle)-.8 E 3.14 -.65
(y, 1)-.15 H 4.34(995\). He).65 F(prides)4.34 E 1.945(himself on ha)72 410.4 R
1.944(ving no de)-.2 F 1.944(grees in computer science,)-.15 F .958
(instead obtaining a B.S.E. in Aerospace Engineering)72 422.4 R 1.948
(from the Uni)72 434.4 R 3.248 -.65(v. o)-.25 H 4.448(fM).65 G(ichig)160.272
434.4 Q 1.948(an \(1973\) and a Ph.D. in)-.05 F 4.163
(Systems Engineering from the Uni)72 446.4 R 5.464 -.65(v. o)-.25 H 6.664(fA)
.65 G(rizona)263.01 446.4 Q 10.786(\(1982\). He)72 458.4 R 8.286
(can be reached via email as)136.892 458.4 R/F3 10/Courier@0 SF
(<rstevens@noao.edu>)72 470.4 Q F0(.)A F2 -.15(Ja)72 494.4 S .058(n-Simon P).15
F(endry)-.2 E F0 .059(is a graduate of Imperial Colle)2.558 F(ge,)-.15 E .883
(London where he did postgraduate research on en)72 506.4 R(vi-)-.4 E .98
(ronments to support logic engineering.)72 518.4 R .98(He is proba-)5.98 F .202
(bly best kno)72 530.4 R .202(wn as the author of)-.25 F F1(Amd)2.702 E F0
2.702(,t)C .202(he freely a)227.516 530.4 R -.25(va)-.2 G(il-).25 E 1.047
(able and widely ported automounter)72 542.4 R 3.548(,a)-.4 G 1.048
(nd also as the)230.696 542.4 R 2.009
(author of six of the pseudo-\214lesystems in 4.4BSD.)72 554.4 R .564
(Jan-Simon has w)72 566.4 R(ork)-.1 E .565(ed for IBM and CNS and is no)-.1 F
(w)-.25 E 5.494(ac)72 578.4 S 2.993
(onsultant with Sequent Corporation in Europe.)86.374 578.4 R -1.1(Yo)72 590.4
S 16.65(uc)1.1 G 14.15(an contact him via email at)109.21 590.4 R F3
(<jsp@sequent.com>)72 602.4 Q F0(.)A EP
%%Trailer
end
%%EOF
